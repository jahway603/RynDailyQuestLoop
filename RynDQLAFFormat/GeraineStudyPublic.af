~~ {
~~ FOR AUTO-COMPLETION ASSISTANCE: testvar getvar setvar touchvar clearallvars clearvar getcharintprop getchardoubleprop getcharquadprop getcharboolprop getcharstringprop getisspellknown getcancastspell_hunt getcancastspell_buff getcharvital_base getcharvital_current getcharvital_buffedmax getcharskill_traininglevel getcharskill_base getcharskill_buffed getplayerlandcell getplayercoordinates coordinategetns coordinategetwe coordinategetz coordinatetostring coordinateparse coordinatedistancewithz coordinatedistanceflat wobjectgetphysicscoordinates wobjectgetname wobjectgetobjectclass wobjectgettemplatetype wobjectgetisdooropen wobjectfindnearestmonster wobjectfindnearestdoor wobjectfindnearestbyobjectclass wobjectfindininventorybytemplatetype wobjectfindininventorybyname wobjectfindininventorybynamerx wobjectgetselection wobjectgetplayer wobjectfindnearestbynameandobjectclass actiontryselect actiontryuseitem actiontryapplyitem actiontrygiveitem actiontryequipanywand actiontrycastbyid actiontrycastbyidontarget chatbox chatboxpaste statushud statushudcolored uigetcontrol uisetlabel isfalse istrue iif randint cstr strlen getobjectinternaltype cstrf stopwatchcreate stopwatchstart stopwatchstop stopwatchelapsedseconds cnumber floor ceiling round abs getworldname getitemcountininventorybyname getheading getitemcountininventorybynamerx getheadingto actiontrygiveprofile vitae getfellowshipstatus getfellowshipname getfellowshipisopen getfellowshipisleader getfellowshipleaderid getfellowshipcanrecruit getfellowid getfellowshipcount getfellowshiplocked getfellowname getfellowshipisfull sin cos tan sqrt asin acos atan atan2 sinh cosh tanh vtsetmetastate getregexmatch echo chr ord wobjectgetid wobjectgethealth wobjectfindbyid wobjectgetintprop wobjectfindnearestbytemplatetype wobjectgetopencontainer testquestflag getquestktprogress isrefreshingquests getquestktrequired getqueststatus getisday getgamehour getgamehourname getisnight getgameday getgameticks getminutesuntilday getgamemonth getgamemonthname getminutesuntilnight getgameyear uisetvisible uiviewvisible uiviewexists getgvar touchgvar getpvar touchpvar setgvar cleargvar setpvar clearpvar testgvar clearallgvars testpvar clearallpvars dictgetitem dictcreate dicthaskey dictadditem dictkeys dictremovekey dictvalues dictclear dictsize dictcopy listgetitem listpop listcreate listcontains listremove listadd listindexof listremoveat listinsert listlastindexof listclear listcopy listcount listreverse

~~																						
~~ File auto-generated by metaf, a program created by Eskarina of Morningthaw/Coldeve.	
~~		Get metaf here: https://github.com/JJEII/metaf/									
~~																						
~~ All recognized structural designators:												
~~		STATE:				DO:															
~~		IF:					NAV:														
~~																						
~~ All recognized CONDITION (IF:) operation keywords:									
~~		Never				NavEmpty			MobsInDist_Priority		Not				
~~		Always				Death				NeedToBuff				PSecsInStateGE	
~~		All					VendorOpen			NoMobsInDist			SecsOnSpellGE	
~~		Any					VendorClosed		BlockE					BuPercentGE		
~~		ChatMatch			ItemCountLE			CellE					DistToRteGE		
~~		MainSlotsLE			ItemCountGE			IntoPortal				Expr			
~~		SecsInStateGE		MobsInDist_Name		ExitPortal				ChatCapture		
~~																						
~~ All recognized ACTION (DO:) operation keywords:										
~~		None				EmbedNav			ChatExpr				SetOpt			
~~		SetState			CallState			SetWatchdog				CreateView		
~~		Chat				Return				ClearWatchdog			DestroyView		
~~		DoAll				DoExpr				GetOpt					DestroyAllViews	
~~																						
~~ All recognized NAV types:															
~~		circular			follow														
~~		linear				once														
~~																						
~~ All recognized NAV NODE types:														
~~		flw					vnd															
~~		pnt					ptl															
~~		rcl					tlk															
~~		pau					chk															
~~		cht					jmp															
~~		prt (deprecated in VTank)														
~~ }																					

STATE: {AltarReact} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Expr {getpvar[Altar]==West}
			ChatMatch {^You give Altar Stone Tablet.}
		DO:	DoAll
				DoExpr {setpvar[Given,1]}
				DoExpr {setpvar[Altar,Middle]}
				SetState {Altars}
	IF:	All
			Expr {getpvar[Altar]==Middle}
			ChatMatch {^You give Altar Stone Tablet.}
		DO:	DoAll
				DoExpr {setpvar[Given,1]}
				DoExpr {setpvar[Altar,East]}
				SetState {Altars}
	IF:	All
			Expr {getpvar[Altar]==East}
			ChatMatch {^You give Altar Stone Tablet.}
		DO:	DoAll
				DoExpr {setpvar[Given,1]}
				DoExpr {setpvar[Altar,Done]}
				SetState {Altars}
	IF:	All
			Expr {getpvar[Given]==1}
			SecsInStateGE 6
		DO:	DoAll
				DoExpr {setpvar[Given,0]}
				SetState {Altars}
~~ }
STATE: {Altars} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Expr {getpvar[Altar]==West}
		DO:	DoAll
				DoExpr {actiontrygiveitem[wobjectfindininventorybytemplatetype[getvar[WestWCID]],wobjectfindnearestbytemplatetype[72288]]}
				SetState {AltarReact}
	IF:	Expr {getpvar[Altar]==Middle}
		DO:	DoAll
				DoExpr {actiontrygiveitem[wobjectfindininventorybytemplatetype[getvar[MiddleWCID]],wobjectfindnearestbytemplatetype[72289]]}
				SetState {AltarReact}
	IF:	Expr {getpvar[Altar]==East}
		DO:	DoAll
				DoExpr {actiontrygiveitem[wobjectfindininventorybytemplatetype[getvar[EastWCID]],wobjectfindnearestbytemplatetype[72290]]}
				SetState {AltarReact}
	IF:	Expr {getpvar[Altar]==Done}
		DO:	EmbedNav nav0 {ToDoor.nav}
	IF:	All
			Expr {getpvar[Altar]==Done}
			CellE 9302016D
			NavEmpty
		DO:	DoAll
				DoExpr {setpvar[StateName,ToRen]}
				DoExpr {setpvar[CheckSync,ToRen]}
				Chat {/vt meta load CheckPublic} ~~ ToRen
~~ }
STATE: {BookSplit} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Any
				All
					Expr {getpvar[Leader]==1}
					Expr {getpvar[AdminSkip]==0}
				Expr {getpvar[Char]==2}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav1 {GS1.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]==3}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav2 {C2.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]==4}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav3 {C3.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]==5}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav4 {C4.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]==6}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav5 {C5.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]==7}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav6 {C6.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]==8}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav7 {C7.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]==9}
			CellE 93020161
			NoMobsInDist 15
			NavEmpty
		DO:	EmbedNav nav8 {C8.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Any
				CellE 93020150
				CellE 9302014D
				CellE 9302014A
				CellE 93020154
				CellE 93020179
				CellE 93020186
				CellE 93020189
				CellE 9302018C
			NavEmpty
		DO:	CallState {UseBook} {BookSplit}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 93020150
		DO:	EmbedNav nav9 {MidFromC1.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 9302014D
		DO:	EmbedNav nav10 {MidFromC2.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 9302014A
		DO:	EmbedNav nav11 {MidFromC3.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 93020154
		DO:	EmbedNav nav12 {MidFromC4.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 93020179
		DO:	EmbedNav nav13 {MidFromC5.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 93020186
		DO:	EmbedNav nav14 {MidFromC6.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 93020189
		DO:	EmbedNav nav15 {MidFromC7.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 9302018C
		DO:	EmbedNav nav16 {MidFromC8.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 93020161
			NavEmpty
		DO:	DoAll
				DoExpr {setpvar[StateName,GeraineWait]}
				DoExpr {setpvar[CheckSync,GeraineWait]}
				Chat {/vt meta load CheckPublic} ~~ GeraineWait
~~ }
STATE: {DeathRecall} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {testvar[CombatStuck]}
		DO:	DoExpr {stopwatchstart[setvar[CombatStuck, stopwatchcreate[]]]}
	IF:	All
			Expr {testvar[CombatStuck]]}
			Expr {stopwatchelapsedseconds[getvar[CombatStuck]]>=15}
			Any
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Missile}
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Melee}
		DO:	Chat {/ub quit}
	IF:	IntoPortal
		DO:	DoExpr {clearvar[CombatStuck]}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[StateName,DeathRecall]}
				DoExpr {clearvar[PitStop]}
				DoExpr {clearvar[StateTimer]}
				SetOpt {NavCloseStopRange} {0.00625}
				SetOpt {EnableCombat} {False}
				SetOpt {EnableNav} {False}
				EmbedNav nav17 {[none]}
				DoExpr {clearvar[Trigger]}
	IF:	Not Any
			BlockE 74EA0000
			BlockE 74E90000
		DO:	DoAll
				DoExpr {actiontrycastbyid[2645]} ~~ SpellId 2645 is "Portal Recall".
				SetState {DeathRecall}
	IF:	BlockE 74EA0000
		DO:	DoAll
				SetOpt {EnableNav} {True}
				EmbedNav nav18 {[DeathDelay]}
	IF:	All
			NavEmpty
			Any
				BlockE 74EA0000
				BlockE 74E90000
		DO:	DoAll
				DoExpr {clearvar[CombatStuck]}
				SetOpt {EnableNav} {True}
				DoExpr {setpvar[StateName,ToStudy]}
				DoExpr {setpvar[CheckSync,Death]}
				Chat {/vt meta load CheckPublic} ~~ Death
	IF:	Always
		DO:	DoAll
				SetOpt {LootOnlyRareCorpses} {True}
				SetOpt {EnableCombat} {False}
~~ }
STATE: {Default} ~~ {
	IF:	All
			Expr {getpvar[Profile]==GeraineStudyPublic}
			Expr {getpvar[StateName]!=Default}
			Not NeedToBuff
		DO:	DoAll
				ChatExpr {\/vt meta load +getpvar[Profile]}
				ChatExpr {\/vt setmetastate +getpvar[StateName]}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[Profile, GeraineStudyPublic]}
				DoExpr {setpvar[StateName, Default]}
				DoExpr {setpvar[Stuck, DeathRecall]}
	IF:	Any
			Expr {getcharstringprop[1]==getpvar[LeaderName]}
			ItemCountGE 1 {Egg}
		DO:	DoExpr {setpvar[Leader,1]}
	IF:	Any
			Expr {getcharboolprop[44]==1}
			Expr {getpvar[FellowCount]<2}
		DO:	DoExpr {setpvar[AdminSkip,1]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameTwo]}
		DO:	DoExpr {setpvar[Char,2]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameThree]}
		DO:	DoExpr {setpvar[Char,3]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameFour]}
		DO:	DoExpr {setpvar[Char,4]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameFive]}
		DO:	DoExpr {setpvar[Char,5]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameSix]}
		DO:	DoExpr {setpvar[Char,6]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameSeven]}
		DO:	DoExpr {setpvar[Char,7]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameEight]}
		DO:	DoExpr {setpvar[Char,8]}
	IF:	Expr {getcharstringprop[1]==getpvar[FellowNameNine]}
		DO:	DoExpr {setpvar[Char,9]}
	IF:	Always
		DO:	DoAll
				Chat {/vt settings loadchar DQLProfile}
				Chat {/vt loot load DailyLoopPublic.utl}
				SetOpt {EnableNav} {True}
				SetOpt {AutoCram} {False}
				SetOpt {AutoStack} {True}
				SetOpt {LootFellowCorpses} {True}
				SetOpt {NavPriorityBoost} {False}
				SetOpt {EnableCombat} {False}
				SetOpt {SummonPets} {False}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
				SetOpt {NavCloseStopRange} {0.00625}
				SetOpt {EnableBuffing} {True}
				SetOpt {EnableLooting} {True}
				SetOpt {LootOnlyRareCorpses} {True}
				SetOpt {OpenDoors} {True}
				SetOpt {IdlePeaceMode} {False}
				SetOpt {Recharge-Helper-HitP} {50}
	IF:	SecsInStateGE 180
		DO:	Chat {/ub quit}
	IF:	Any
			All
				Expr {getcharskill_buffed[32]>=391}
				Expr {getspellexpirationbyname[Aura of Incantation of Defender Self]<=1800}
			All
				Expr {getcharskill_buffed[32]<=390}
				Expr {getspellexpirationbyname[Aura of Cragstone's Will]<=1800}
		DO:	DoAll
				Chat {/vt forcebuff}
				DoExpr {setgvar[Buffing,1]}
				DoExpr {setpvar[StateName,vtgetmetastate[]]}
				SetState {SyncBuff}
	IF:	Expr {getgvar[Buffing]==1}
		DO:	DoAll
				DoExpr {setpvar[StateName,vtgetmetastate[]]}
				SetState {SyncBuff}
	IF:	All
			SecsInStateGE 3
			Not NeedToBuff
		DO:	DoAll
				DoExpr {setpvar[StateName,ToTN]}
				SetState {ToTN}
~~ }
STATE: {Finished} ~~ {
	IF:	All
			SecsInStateGE 5
			Any
				Expr {testpvar[Profile]==1}
				Expr {testpvar[StateName]==1}
				Expr {testpvar[Stuck]==1}
				Expr {testpvar[Given]==1}
				Expr {testpvar[Altar]==1}
				Expr {testpvar[Char]==1}
				Expr {testpvar[CircleCount]==1}
				Expr {testpvar[CrescentCount]==1}
				Expr {testpvar[CrossCount]==1}
				Expr {testpvar[StarCount]==1}
				Expr {testpvar[TriangleCount]==1}
				Expr {testpvar[WaveCount]==1}
				Expr {testpvar[Go]==1}
				Expr {testgvar[QuestComplete]==1}
				Expr {testgvar[Solved]==1}
				Expr {testgvar[More]==1}
				Expr {testgvar[East]==1}
				Expr {testgvar[Middle]==1}
				Expr {testgvar[West]==1}
				Expr {testgvar[AllDone]==1}
				Expr {testgvar[GoNow+getworldname[]]==1}
				Expr {testgvar[DefaultPass]==1}
				Expr {testgvar[GoNowClear]==1}
				Expr {testgvar[Checking]==1}
				Expr {testgvar[GoNowTwo]==1}
				Expr {testgvar[GeraineStudy]==1}
				Expr {testgvar[getcharstringprop[1]+getworldname[]]==1}
		DO:	DoAll
				DoExpr {clearpvar[Profile]}
				DoExpr {clearpvar[StateName]}
				DoExpr {clearpvar[Stuck]}
				DoExpr {clearpvar[BuffingStartAll]}
				DoExpr {clearpvar[Given]}
				DoExpr {clearpvar[Altar]}
				DoExpr {clearpvar[Char]}
				DoExpr {clearpvar[CircleCount]}
				DoExpr {clearpvar[CrescentCount]}
				DoExpr {clearpvar[CrossCount]}
				DoExpr {clearpvar[StarCount]}
				DoExpr {clearpvar[TriangleCount]}
				DoExpr {clearpvar[WaveCount]}
				DoExpr {clearpvar[Go]}
				DoExpr {cleargvar[QuestComplete]}
				DoExpr {cleargvar[Solved]}
				DoExpr {cleargvar[More]}
				DoExpr {cleargvar[East]}
				DoExpr {cleargvar[Middle]}
				DoExpr {cleargvar[West]}
				DoExpr {cleargvar[AllDone]}
				DoExpr {cleargvar[GoNow+getworldname[]]}
				DoExpr {cleargvar[DefaultPass]}
				DoExpr {cleargvar[GoNowClear]}
				DoExpr {cleargvar[Checking]}
				DoExpr {cleargvar[GoNowTwo]}
				DoExpr {cleargvar[GeraineStudy]}
				DoExpr {cleargvar[getcharstringprop[1]+getworldname[]]}
				SetState {Finished}
	IF:	All
			Expr {testpvar[Profile]==0}
			Expr {testpvar[StateName]==0}
			Expr {testpvar[Stuck]==0}
			Expr {testpvar[Given]==0}
			Expr {testpvar[Altar]==0}
			Expr {testpvar[Char]==0}
			Expr {testpvar[CircleCount]==0}
			Expr {testpvar[CrescentCount]==0}
			Expr {testpvar[CrossCount]==0}
			Expr {testpvar[StarCount]==0}
			Expr {testpvar[TriangleCount]==0}
			Expr {testpvar[WaveCount]==0}
			Expr {testpvar[Go]==0}
			Expr {testgvar[QuestComplete]==0}
			Expr {testgvar[Solved]==0}
			Expr {testgvar[More]==0}
			Expr {testgvar[East]==0}
			Expr {testgvar[Middle]==0}
			Expr {testgvar[West]==0}
			Expr {testgvar[AllDone]==0}
			Expr {testgvar[GoNow+getworldname[]]==0}
			Expr {testgvar[DefaultPass]==0}
			Expr {testgvar[GoNowClear]==0}
			Expr {testgvar[Checking]==0}
			Expr {testgvar[GoNowTwo]==0}
			Expr {testgvar[GeraineStudy]==0}
			Expr {testgvar[getcharstringprop[1]+getworldname[]]==0}
		DO:	Chat {/vt meta load QuestCheckPublic}
~~ }
STATE: {Garbage} ~~ {
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Not Expr {testgvar[QuestComplete]}
		DO:	DoAll
				DoExpr {setgvar[QuestComplete,listcreate[]]}
				SetState {Garbage}
	IF:	All
			Expr {testgvar[QuestComplete]}
			Not Expr {listcontains[getgvar[QuestComplete],getcharstringprop[1]]}
			Expr {getobjectinternaltype[wobjectfindininventorybyname[Stone Tablet]]==1}
			Expr {getobjectinternaltype[wobjectfindininventorybyname[Door Key]]==1}
			Expr {getobjectinternaltype[wobjectfindininventorybyname[Torn Parchment]]==1}
		DO:	DoAll
				DoExpr {listadd[getgvar[QuestComplete],getcharstringprop[1]]}
				SetState {Garbage}
	IF:	All
			Expr {testgvar[QuestComplete]}
			Any
				Expr {getpvar[FellowCount]==1&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]}
				Expr {getpvar[FellowCount]==2&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]}
				Expr {getpvar[FellowCount]==3&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]}
				Expr {getpvar[FellowCount]==4&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]}
				Expr {getpvar[FellowCount]==5&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]}
				Expr {getpvar[FellowCount]==6&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]}
				Expr {getpvar[FellowCount]==7&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSeven]]}
				Expr {getpvar[FellowCount]==8&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameEight]]}
				Expr {getpvar[FellowCount]==9&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameEight]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameNine]]}
				Expr {getpvar[AdminSkip]==1}
		DO:	DoAll
				DoExpr {setpvar[StateName,Finished]}
				DoExpr {setpvar[CheckSync,Finished]}
				Chat {/vt meta load CheckPublic} ~~ Finished
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybyname[Stone Tablet]]==7}
		DO:	DoAll
				DoExpr {actiontrygiveitem[wobjectfindininventorybynamerx[Stone Tablet],wobjectfindnearestbynameandobjectclass[37,Garbage Barrel]]}
				SetState {Garbage}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybyname[Door Key]]==7}
		DO:	DoAll
				DoExpr {actiontrygiveitem[wobjectfindininventorybyname[Door Key],wobjectfindnearestbynameandobjectclass[37,Garbage Barrel]]}
				SetState {Garbage}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybyname[Torn Parchment]]==7}
		DO:	DoAll
				DoExpr {actiontrygiveitem[wobjectfindininventorybyname[Torn Parchment],wobjectfindnearestbynameandobjectclass[37,Garbage Barrel]]}
				SetState {Garbage}
~~ }
STATE: {Geraine} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Always
		DO:	DoAll
				SetOpt {EnableCombat} {True}
				SetOpt {SummonPets} {True}
	IF:	Expr {getpvar[AdminSkip]==1}
		DO:	DoExpr {setpvar[Char,9]}
	IF:	Always
		DO:	DoAll
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.1875]]`,`vtsetsetting[AttackDistance,cstr[0.1875]]`]}
				SetOpt {NavPriorityBoost} {True}
				EmbedNav nav19 {ToGeraine.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
			Expr {getpvar[Char]>0}
			CellE 93020161
			Not MobsInDist_Name 1 55 {Geraine}
		DO:	SetState {BookSplit}
	IF:	All
			Expr {getpvar[Leader]==1}
			CellE 93020161
			Not MobsInDist_Name 1 55 {Geraine}
		DO:	DoAll
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0625]]`]}
				DoExpr {setpvar[StateName,GeraineWait]}
				DoExpr {setpvar[CheckSync,GeraineWait]}
				Chat {/vt meta load CheckPublic} ~~ GeraineWait
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			Expr {getpvar[Char]>0}
			CellE 93020161
			Not MobsInDist_Name 1 55 {Geraine}
		DO:	DoAll
				DoExpr {setpvar[StateName,GeraineWait]}
				DoExpr {setpvar[CheckSync,GeraineWait]}
				Chat {/vt meta load CheckPublic} ~~ GeraineWait
~~ }
STATE: {GeraineCombos} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Always
		DO:	DoAll
				EmbedNav nav20 {[none]}
	IF:	Never
		DO:	Chat {%%% West %%%}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72291]]==7}
		DO:	DoExpr {setvar[WestSolve,Circle]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72292]]==7}
		DO:	DoExpr {setvar[WestSolve,Crescent]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72293]]==7}
		DO:	DoExpr {setvar[WestSolve,Cross]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72294]]==7}
		DO:	DoExpr {setvar[WestSolve,Star]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72295]]==7}
		DO:	DoExpr {setvar[WestSolve,Triangle]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72296]]==7}
		DO:	DoExpr {setvar[WestSolve,Wave]}
	IF:	Never
		DO:	Chat {%%% Middle %%%}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72297]]==7}
		DO:	DoExpr {setvar[MiddleSolve,Star]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72298]]==7}
		DO:	DoExpr {setvar[MiddleSolve,Cross]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72299]]==7}
		DO:	DoExpr {setvar[MiddleSolve,Triangle]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72300]]==7}
		DO:	DoExpr {setvar[MiddleSolve,Circle]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72301]]==7}
		DO:	DoExpr {setvar[MiddleSolve,Wave]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72302]]==7}
		DO:	DoExpr {setvar[MiddleSolve,Crescent]}
	IF:	Never
		DO:	Chat {%%% East %%%}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72303]]==7}
		DO:	DoExpr {setvar[EastSolve,Wave]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72304]]==7}
		DO:	DoExpr {setvar[EastSolve,Crescent]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72305]]==7}
		DO:	DoExpr {setvar[EastSolve,Star]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72306]]==7}
		DO:	DoExpr {setvar[EastSolve,Cross]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72307]]==7}
		DO:	DoExpr {setvar[EastSolve,Circle]}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72308]]==7}
		DO:	DoExpr {setvar[EastSolve,Triangle]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[WestSolve]==Circle}
		DO:	DoExpr {setpvar[CircleCount,getpvar[CircleCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[WestSolve]==Crescent}
		DO:	DoExpr {setpvar[CrescentCount,getpvar[CrescentCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[WestSolve]==Cross}
		DO:	DoExpr {setpvar[CrossCount,getpvar[CrossCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[WestSolve]==Star}
		DO:	DoExpr {setpvar[StarCount,getpvar[StarCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[WestSolve]==Triangle}
		DO:	DoExpr {setpvar[TriangleCount,getpvar[TriangleCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[WestSolve]==Wave}
		DO:	DoExpr {setpvar[WaveCount,getpvar[WaveCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[EastSolve]==Circle}
		DO:	DoExpr {setpvar[CircleCount,getpvar[CircleCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[EastSolve]==Crescent}
		DO:	DoExpr {setpvar[CrescentCount,getpvar[CrescentCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[EastSolve]==Cross}
		DO:	DoExpr {setpvar[CrossCount,getpvar[CrossCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[EastSolve]==Star}
		DO:	DoExpr {setpvar[StarCount,getpvar[StarCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[EastSolve]==Triangle}
		DO:	DoExpr {setpvar[TriangleCount,getpvar[TriangleCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[EastSolve]==Wave}
		DO:	DoExpr {setpvar[WaveCount,getpvar[WaveCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[MiddleSolve]==Circle}
		DO:	DoExpr {setpvar[CircleCount,getpvar[CircleCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[MiddleSolve]==Crescent}
		DO:	DoExpr {setpvar[CrescentCount,getpvar[CrescentCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[MiddleSolve]==Cross}
		DO:	DoExpr {setpvar[CrossCount,getpvar[CrossCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[MiddleSolve]==Star}
		DO:	DoExpr {setpvar[StarCount,getpvar[StarCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[MiddleSolve]==Triangle}
		DO:	DoExpr {setpvar[TriangleCount,getpvar[TriangleCount]+1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Solved]==0}
			Expr {getvar[MiddleSolve]==Wave}
		DO:	DoExpr {setpvar[WaveCount,getpvar[WaveCount]+1]}
	IF:	All
			Expr {getinventorycountbytemplatetype[45668]>=getpvar[CircleCount]}
			Expr {getinventorycountbytemplatetype[45669]>=getpvar[CrescentCount]}
			Expr {getinventorycountbytemplatetype[72286]>=getpvar[CrossCount]}
			Expr {getinventorycountbytemplatetype[45671]>=getpvar[StarCount]}
			Expr {getinventorycountbytemplatetype[72287]>=getpvar[TriangleCount]}
			Expr {getinventorycountbytemplatetype[45649]>=getpvar[WaveCount]}
			SecsInStateGE 2
		DO:	DoAll
				DoExpr {setgvar[Solved,1]}
				SetState {SolverCountItems}
	IF:	All
			Any
				Expr {getinventorycountbytemplatetype[45668]<getpvar[CircleCount]}
				Expr {getinventorycountbytemplatetype[45669]<getpvar[CrescentCount]}
				Expr {getinventorycountbytemplatetype[72286]<getpvar[CrossCount]}
				Expr {getinventorycountbytemplatetype[45671]<getpvar[StarCount]}
				Expr {getinventorycountbytemplatetype[72287]<getpvar[TriangleCount]}
				Expr {getinventorycountbytemplatetype[45649]<getpvar[WaveCount]}
			SecsInStateGE 2
		DO:	DoAll
				DoExpr {setgvar[More,1]}
				SetState {SolverCountItems}
~~ }
STATE: {GeraineTwo} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			NoMobsInDist 15
			Any
				CellE 93020162
				CellE 93020161
				CellE 93020158
				CellE 93020157
		DO:	SetState {BookSplit}
~~ }
STATE: {GeraineWait} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Expr {getgvar[AllDone]==1}
		DO:	SetState {ToGY}
	IF:	MobsInDist_Name 1 55 {Geraine}
		DO:	DoAll
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.1875]]`,`vtsetsetting[AttackDistance,cstr[0.1875]]`]}
				SetState {GeraineTwo}
~~ }
STATE: {SolverCountItems} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Expr {getgvar[Solved]==1}
		DO:	DoAll
				DoExpr {setpvar[StateName,ToAltars]}
				DoExpr {setpvar[CheckSync,Solved]}
				Chat {/vt meta load CheckPublic} ~~Solved
	IF:	Expr {getgvar[More]==1}
		DO:	DoAll
				DoExpr {setpvar[StateName,Stones]}
				DoExpr {setpvar[CheckSync,More]}
				Chat {/vt meta load CheckPublic} ~~ More
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetState {GeraineCombos}
~~ }
STATE: {Stones} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Expr {testvar[StateTimer]}
			Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=600}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Always
		DO:	SetOpt {EnableCombat} {True}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getinventorycountbytemplatetype[45668]>=getpvar[CircleCount]}
			Expr {getinventorycountbytemplatetype[45669]>=getpvar[CrescentCount]}
			Expr {getinventorycountbytemplatetype[72286]>=getpvar[CrossCount]}
			Expr {getinventorycountbytemplatetype[45671]>=getpvar[StarCount]}
			Expr {getinventorycountbytemplatetype[72287]>=getpvar[TriangleCount]}
			Expr {getinventorycountbytemplatetype[45649]>=getpvar[WaveCount]}
		DO:	SetOpt {LootOnlyRareCorpses} {True}
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetOpt {LootOnlyRareCorpses} {False}
	IF:	CellE 93020171
		DO:	EmbedNav nav21 {LoopNoDoors.nav}
	IF:	NavEmpty
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {cleargvar[More]}
				SetState {StudyCheck}
~~ }
STATE: {StudyCheck} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Expr {getgvar[Solved]==1}
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToAltars]}
				DoExpr {setpvar[CheckSync,ToAltars]}
				Chat {/vt meta load CheckPublic} ~~ ToAltars
	IF:	All
			NavEmpty
			Expr {getgvar[West]==0}
			Expr {getgvar[East]==0}
			Expr {getgvar[Middle]==0}
		DO:	DoAll
				DoExpr {setpvar[Go,0]}
				DoExpr {clearvar[PitStop]}
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToWest]}
				DoExpr {setpvar[CheckSync,ToWest]}
				Chat {/vt meta load CheckPublic} ~~ ToWest
	IF:	All
			NavEmpty
			Expr {getpvar[Leader]==1}
			Expr {getgvar[Middle]==1}
		DO:	DoAll
				DoExpr {clearvar[PitStop]}
				DoExpr {setpvar[CircleCount,0]}
				DoExpr {setpvar[CrescentCount,0]}
				DoExpr {setpvar[CrossCount,0]}
				DoExpr {setpvar[StarCount,0]}
				DoExpr {setpvar[TriangleCount,0]}
				DoExpr {setpvar[WaveCount,0]}
				DoExpr {setpvar[StateName,GeraineCombos]}
				DoExpr {setpvar[CheckSync,Solver]}
				Chat {/vt meta load CheckPublic} ~~ Solver
	IF:	All
			NavEmpty
			Expr {getpvar[Leader]==0}
			Expr {getgvar[Middle]==1}
		DO:	DoAll
				DoExpr {clearvar[PitStop]}
				DoExpr {setpvar[StateName,SolverCountItems]}
				DoExpr {setpvar[CheckSync,Solver]}
				Chat {/vt meta load CheckPublic} ~~Solver
	IF:	All
			NavEmpty
			Expr {getgvar[East]==1}
		DO:	DoAll
				DoExpr {setpvar[Go,0]}
				DoExpr {clearvar[PitStop]}
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToSouth]}
				DoExpr {setpvar[CheckSync,ToSouth]}
				Chat {/vt meta load CheckPublic} ~~ ToSouth
	IF:	All
			NavEmpty
			Expr {getgvar[West]==1}
		DO:	DoAll
				DoExpr {setpvar[Go,0]}
				DoExpr {clearvar[PitStop]}
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToEast]}
				DoExpr {setpvar[CheckSync,ToEast]}
				Chat {/vt meta load CheckPublic} ~~ ToEast
~~ }
STATE: {SyncBuff} ~~{
	IF: Not Expr {testpvar[BuffingStartAll]}
		DO: DoAll
				DoExpr {setpvar[BuffingStartAll,1]}
				Chat {/vt forcebuff}
	IF: All
			NeedToBuff
			Expr {vtgetsetting[EnableBuffing]!=True}
		DO: SetOpt {EnableBuffing} {True}
	IF:	All
			Not Expr {testgvar[SyncBuffComplete]}
			Not NeedToBuff
		DO:	DoAll
				DoExpr {setgvar[SyncBuffComplete,listcreate[]]}
				SetState {SyncBuff}
	IF:	All
			Expr {testgvar[SyncBuffComplete]}
			Not Expr {listcontains[getgvar[SyncBuffComplete],getcharstringprop[1]]}
			Not NeedToBuff
		DO:	DoAll
				DoExpr {listadd[getgvar[SyncBuffComplete],getcharstringprop[1]]}
				SetState {SyncBuff}
	IF:	All
			Not NeedToBuff
			Expr {testgvar[SyncBuffComplete]}
			Any
				Expr {getpvar[FellowCount]==1&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]}
				Expr {getpvar[FellowCount]==2&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]}
				Expr {getpvar[FellowCount]==3&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameThree]]}
				Expr {getpvar[FellowCount]==4&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFour]]}
				Expr {getpvar[FellowCount]==5&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFive]]}
				Expr {getpvar[FellowCount]==6&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameSix]]}
				Expr {getpvar[FellowCount]==7&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameSeven]]}
				Expr {getpvar[FellowCount]==8&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameEight]]}
				Expr {getpvar[FellowCount]==9&&listcontains[getgvar[SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameEight]]&&listcontains[getgvar[SyncBuffComplete],getpvar[FellowNameNine]]}		
		DO: DoAll
				DoExpr {cleargvar[Buffing]}
				DoExpr {setpvar[StateName,Default]}
				DoExpr {vtsetmetastate[getpvar[StateName]]}
~~}
STATE: {ToAltars} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetOpt {LootOnlyRareCorpses} {True}
	IF:	Expr {getpvar[Leader]==1}
		DO:	DoAll
				DoExpr {setvar[WaveWCID,45649]}
				DoExpr {setvar[CircleWCID,45668]}
				DoExpr {setvar[CrescentWCID,45669]}
				DoExpr {setvar[StarWCID,45671]}
				DoExpr {setvar[CrossWCID,72286]}
				DoExpr {setvar[TriangleWCID,72287]}
	IF:	Expr {getpvar[Leader]==1}
		DO:	DoAll
				DoExpr {setvar[WestCount,getinventorycountbytemplatetype[getvar[WestWCID]]]}
				DoExpr {setvar[MiddleCount,getinventorycountbytemplatetype[getvar[MiddleWCID]]]}
				DoExpr {setvar[EastCount,getinventorycountbytemplatetype[getvar[EastWCID]]]}
	IF:	Never
		DO:	Chat {%%% West %%%}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[WestSolve]==Wave}
		DO:	DoExpr {setvar[WestWCID,getvar[WaveWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[WestSolve]==Circle}
		DO:	DoExpr {setvar[WestWCID,getvar[CircleWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[WestSolve]==Crescent}
		DO:	DoExpr {setvar[WestWCID,getvar[CrescentWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[WestSolve]==Star}
		DO:	DoExpr {setvar[WestWCID,getvar[StarWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[WestSolve]==Cross}
		DO:	DoExpr {setvar[WestWCID,getvar[CrossWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[WestSolve]==Triangle}
		DO:	DoExpr {setvar[WestWCID,getvar[TriangleWCID]]}
	IF:	Never
		DO:	Chat {%%% East %%%}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[EastSolve]==Wave}
		DO:	DoExpr {setvar[EastWCID,getvar[WaveWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[EastSolve]==Circle}
		DO:	DoExpr {setvar[EastWCID,getvar[CircleWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[EastSolve]==Crescent}
		DO:	DoExpr {setvar[EastWCID,getvar[CrescentWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[EastSolve]==Star}
		DO:	DoExpr {setvar[EastWCID,getvar[StarWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[EastSolve]==Cross}
		DO:	DoExpr {setvar[EastWCID,getvar[CrossWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[EastSolve]==Triangle}
		DO:	DoExpr {setvar[EastWCID,getvar[TriangleWCID]]}
	IF:	Never
		DO:	Chat {%%% Middle %%%}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[MiddleSolve]==Wave}
		DO:	DoExpr {setvar[MiddleWCID,getvar[WaveWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[MiddleSolve]==Circle}
		DO:	DoExpr {setvar[MiddleWCID,getvar[CircleWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[MiddleSolve]==Crescent}
		DO:	DoExpr {setvar[MiddleWCID,getvar[CrescentWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[MiddleSolve]==Star}
		DO:	DoExpr {setvar[MiddleWCID,getvar[StarWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[MiddleSolve]==Cross}
		DO:	DoExpr {setvar[MiddleWCID,getvar[CrossWCID]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[MiddleSolve]==Triangle}
		DO:	DoExpr {setvar[MiddleWCID,getvar[TriangleWCID]]}
	IF:	Expr {getpvar[Leader]==1}
		DO:	DoAll
				EmbedNav nav22 {ToWestAltar.nav}
	IF:	All
			Expr {getpvar[Leader]==1}
			NavEmpty
		DO:	DoAll
				DoExpr {setpvar[Altar,West]}
				SetState {Altars}
	IF:	Expr {getpvar[Leader]==0}
		DO:	DoAll
				EmbedNav nav23 {ToDoor.nav}
	IF:	All
			NavEmpty
			Expr {getpvar[Leader]==0}
		DO:	DoAll
				DoExpr {setpvar[StateName,ToRen]}
				DoExpr {setpvar[CheckSync,ToRen]}
				Chat {/vt meta load CheckPublic} ~~ ToRen
~~ }
STATE: {ToColo} ~~ {
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {testgvar[QuestComplete]==1}
		DO:	DoExpr {cleargvar[QuestComplete]}
	IF:	All
			SecsInStateGE 2
			Not BlockE 00AF0000
		DO:	DoAll
				DoExpr {actiontrycastbyid[4213]} ~~ SpellId 4213 is "Colosseum Recall".
				SetState {ToColo}
	IF:	All
			Any
				Expr {getgvar[QuestComplete]==0}
				Expr {testgvar[QuestComplete]==0}
			SecsInStateGE 5
			BlockE 00AF0000
		DO:	DoAll
				DoExpr {setpvar[StateName,Garbage]}
				DoExpr {setpvar[CheckSync,Garbage]}
				Chat {/vt meta load CheckPublic} ~~ Garbage
~~ }
STATE: {ToEast} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Expr {testvar[StateTimer]}
			Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=200}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	All
			Expr {getgvar[East]==1}
			CellE 93020171
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {clearvar[PitStop]}
				SetState {StudyCheck}
	IF:	Always
		DO:	DoAll
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0625]]`]}
				SetOpt {EnableCombat} {True}
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetOpt {LootOnlyRareCorpses} {False}
	IF:	CellE 93020171
		DO:	EmbedNav nav24 {ToEast.nav}
	IF:	All
			Expr {getvar[PitStop]==0}
			NavEmpty
			CellE 930201B8
		DO:	DoAll
				SetOpt {EnableNav} {False}
				DoExpr {setvar[PitStop,1]}
				DoExpr {setpvar[StateName,ToEast]}
				DoExpr {setpvar[CheckSync,ToEastPitStopOne]}
				Chat {/vt meta load CheckPublic} ~~ ToEastPitStopOne
	IF:	All
			Expr {getpvar[Go]==0}
			Expr {getvar[PitStop]==1}
			CellE 930201B8
		DO:	DoAll
				SetOpt {EnableNav} {True}
				EmbedNav nav25 {ToEast.nav}
	IF:	All
			Expr {getvar[PitStop]==1}
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72317]]==7}
			CellE 930201B8
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<8}
		DO:	DoAll
				SetOpt {EnableNav} {False}
				DoExpr {actiontryapplyitem[wobjectfindininventorybytemplatetype[72317],wobjectfindnearestbytemplatetype[72320]]}
	IF:	ChatMatch {^The Door has been unlocked.}
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestdoor[]]}
	IF:	All
			CellE 930201B8
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==1}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<8}
		DO:	SetOpt {EnableNav} {True}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72317]]==7}
			CellE 930201B8
			SecsInStateGE 3
		DO:	SetState {ToEast}
	IF:	All
			Expr {getpvar[Go]==0}
			CellE 930201B6
			Expr {getpvar[Leader]==1}
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72303]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72304]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72305]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72306]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72307]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72308]]==7}
		DO:	DoAll
				DoExpr {setgvar[East,1]}
				Chat {/f !Going}
	IF:	ChatMatch {!Going}
		DO:	DoAll
				DoExpr {setpvar[Go,1]}
				EmbedNav nav26 {EastTODrop.nav}
	IF:	All
			Expr {getpvar[Leader]==1}
			CellE 930201B6
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72303]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72304]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72305]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72306]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72307]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72308]]==1}
			NavEmpty
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbytemplatetype[72312]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			CellE 930201B6
			SecsInStateGE 3
		DO:	SetState {ToEast}
~~ }
STATE: {ToGY} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[StateName,ToGY]}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
				SetOpt {SummonPets} {False}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			SecsInStateGE 3
			Expr {getvar[Recall]==0}
			Not CellE 482D0104
		DO:	DoAll
				DoExpr {actiontrycastbyid[4128]} ~~ SpellId 4128 is "Call of the Mhoire Forge".
				SetState {ToGY}
	IF:	CellE 482D0104
		DO:	DoAll
				DoExpr {setvar[Recall,1]}
				EmbedNav nav27 {ToSoldiers.nav}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 482D011C
		DO:	DoExpr {actiontrygiveitem[wobjectfindininventorybytemplatetype[45680],wobjectfindnearestbytemplatetype[45685]]}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
			CellE 482D011C
			SecsInStateGE 3
		DO:	SetState {ToGY}
	IF:	All
			Expr {getpvar[Leader]==1}
			Not Expr {testgvar[QuestComplete]}
		DO:	DoAll
				DoExpr {setgvar[QuestComplete,listcreate[]]}
				SetState {ToGY}
	IF:	All
			Expr {testgvar[QuestComplete]}
			Not Expr {listcontains[getgvar[QuestComplete],getcharstringprop[1]]}
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
		DO:	DoAll
				DoExpr {listadd[getgvar[QuestComplete],getcharstringprop[1]]}
				SetState {ToGY}
	IF:	All
			Expr {testgvar[QuestComplete]}
			Any
				Expr {getpvar[FellowCount]==1&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]}
				Expr {getpvar[FellowCount]==2&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]}
				Expr {getpvar[FellowCount]==3&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]}
				Expr {getpvar[FellowCount]==4&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]}
				Expr {getpvar[FellowCount]==5&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]}
				Expr {getpvar[FellowCount]==6&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]}
				Expr {getpvar[FellowCount]==7&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSeven]]}
				Expr {getpvar[FellowCount]==8&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameEight]]}
				Expr {getpvar[FellowCount]==9&&listcontains[getgvar[QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameEight]]&&listcontains[getgvar[QuestComplete],getpvar[FellowNameNine]]}
				All
					Expr {getpvar[AdminSkip]==1}
					Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
		DO:	DoAll
				DoExpr {setpvar[StateName,ToColo]}
				DoExpr {setpvar[CheckSync,ToColo]}
				Chat {/vt meta load CheckPublic} ~~ ToColo
	IF:	SecsInStateGE 600
		DO:	Chat {/ub quit}
~~ }
STATE: {ToMid} ~~ {
	IF:	CellE 93020171
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				SetState {StudyCheck}
~~ }
STATE: {ToRen} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Expr {testvar[StateTimer]}
			Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=300}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Always
		DO:	SetOpt {EnableCombat} {True}
	IF:	CellE 9302016D
		DO:	EmbedNav nav28 {ToRen.nav}
	IF:	All
			CellE 93020166
			NoMobsInDist 15
			NavEmpty
		DO:	DoAll
				SetOpt {EnableCombat} {False}
				EmbedNav nav29 {ToGeraine.nav}
	IF:	All
			CellE 93020163
			NavEmpty
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,Geraine]}
				DoExpr {setpvar[CheckSync,Geraine]}
				Chat {/vt meta load CheckPublic} ~~ Geraine
~~ }
STATE: {ToSouth} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Expr {testvar[StateTimer]}
			Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=200}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	All
			Expr {getgvar[Middle]==1}
			CellE 93020171
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				SetState {StudyCheck}
	IF:	Always
		DO:	DoAll
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0625]]`]}
				SetOpt {EnableCombat} {True}
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetOpt {LootOnlyRareCorpses} {False}
	IF:	CellE 93020129
		DO:	DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
	IF:	CellE 93020171
		DO:	EmbedNav nav30 {ToSouth.nav}
	IF:	All
			Expr {getvar[PitStop]==0}
			NavEmpty
			CellE 93020100
		DO:	DoAll
				SetOpt {EnableNav} {False}
				DoExpr {setvar[PitStop,1]}
				DoExpr {setvar[Trigger,1]}
				DoExpr {setpvar[StateName,ToSouth]}
				DoExpr {setpvar[CheckSync,ToSouthPitStop]}
				Chat {/vt meta load CheckPublic} ~~ ToSouthPitStop
	IF:	All
			Expr {getvar[PitStop]==1}
			CellE 93020100
		DO:	DoAll
				SetOpt {EnableNav} {True}
				EmbedNav nav31 {ToSouth.nav}
	IF:	All
			Expr {getvar[Middle]==0}
			Expr {getvar[Trigger]==1}
			CellE 93020117
		DO:	DoAll
				DoExpr {setvar[Trigger,2]}
				DoExpr {clearvar[TriggerTimer]}
				SetOpt {EnableNav} {False}
				DoExpr {setpvar[StateName,ToSouth]}
				DoExpr {setpvar[CheckSync,ToSouthTrigger]}
				Chat {/vt meta load CheckPublic} ~~ ToSouthTrigger
	IF:	All
			Expr {getvar[Middle]==0}
			Expr {getvar[Trigger]==2}
			CellE 93020117
		DO:	SetOpt {EnableNav} {True}
	IF:	All
			Expr {getvar[Middle]==0}
			Expr {getvar[Trigger]==2}
			CellE 93020117
		DO:	EmbedNav nav32 {[none]}
	IF:	All
			Expr {getvar[Trigger]==2}
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72315]]==7}
			CellE 93020117
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<8}
		DO:	DoAll
				SetOpt {EnableNav} {False}
				DoExpr {actiontryapplyitem[wobjectfindininventorybytemplatetype[72315],wobjectfindnearestbytemplatetype[72318]]}
	IF:	All
			Expr {getvar[Trigger]==2}
			CellE 93020117
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==1}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<8}
		DO:	SetOpt {EnableNav} {True}
	IF:	ChatMatch {^The Door has been unlocked.}
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestdoor[]]}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72315]]==7}
			CellE 93020117
			SecsInStateGE 3
		DO:	SetState {ToSouth}
	IF:	All
			CellE 93020118
			Expr {getpvar[Go]==0}
			Expr {getpvar[Leader]==1}
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72297]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72298]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72299]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72300]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72301]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72302]]==7}
		DO:	DoAll
				DoExpr {setgvar[Middle,1]}
				Chat {/f !Going}
	IF:	ChatMatch {!Going}
		DO:	DoAll
				DoExpr {setpvar[Go,1]}
				EmbedNav nav33 {SouthToDrop.nav}
				DoExpr {clearvar[Trigger]}
	IF:	All
			Expr {getpvar[Leader]==1}
			CellE 93020118
			Expr {getpvar[Go]==0}
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72297]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72298]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72299]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72300]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72301]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72302]]==1}
			NavEmpty
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbytemplatetype[72311]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			CellE 93020118
			Expr {getpvar[Go]==0}
			SecsInStateGE 3
		DO:	SetState {ToSouth}
	IF:	All
			CellE 93020103
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<5}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
		DO:	DoAll
				DoExpr {actiontryuseitem[wobjectfindnearestdoor[]]}
				SetState {ToSouth}
~~ }
STATE: {ToStudy} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			ChatMatch {!ManDown}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	All
			Expr {testvar[StateTimer]}
			Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=180}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Any
			BlockE EC450000
			BlockE DF6F0000
			BlockE DF6A0000
			BlockE 5EB40000
			BlockE 3ECC0000
			BlockE EE420000
			BlockE F24F0000
		DO:	SetState {ToTN}
	IF:	Always
		DO:	SetOpt {EnableNav} {True}
	IF:	BlockE 00070000
		DO:	EmbedNav nav34 {ToTouTou.nav}
	IF:	BlockE F5590000
		DO:	EmbedNav nav35 {ToSnowy.nav}
	IF:	BlockE 74EA0000
		DO:	EmbedNav nav36 {[none]}
	IF:	All
			Expr {getvar[PitStop]==0}
			NavEmpty
			CellE 77E70019
		DO:	DoAll
				SetOpt {EnableNav} {False}
				SetOpt {EnableCombat} {True}
				DoExpr {setvar[PitStop,1]}
				DoExpr {setpvar[Stuck, DeathRecall]}
				DoExpr {setpvar[StateName,ToStudy]}
				DoExpr {setpvar[CheckSync,ToStudy]}
				Chat {/vt meta load CheckPublic} ~~ ToStudy
	IF:	All
			Expr {getvar[PitStop]==1}
			CellE 77E70019
			NoMobsInDist 7
		DO:	DoAll
				SetOpt {EnableNav} {True}
				SetOpt {EnableCombat} {True}
				EmbedNav nav37 {ToStudy.nav}
	IF:	BlockE 93020000
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {clearvar[PitStop]}
				SetState {StudyCheck}
	IF:	Any
			BlockE C8E90000
			BlockE 3ECC0000
			BlockE 5EB40000
			BlockE DF6A0000
			BlockE DF6F0000
			BlockE EC450000
			BlockE EE420000
			BlockE F14A0000
			BlockE F24F0000
		DO:	SetState {ToTN}
~~ }
STATE: {ToTN} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {testvar[CombatStuck]}
		DO:	DoExpr {stopwatchstart[setvar[CombatStuck, stopwatchcreate[]]]}
	IF:	Any
			All
				SecsInStateGE 10
				BlockE F6820000
				Expr {getvar[Recall]==1}
				Not Expr {wobjectfindnearestbynameandobjectclass[14,Portal to Town Network]}
			All
				Expr {testvar[CombatStuck]]}
				Expr {stopwatchelapsedseconds[getvar[CombatStuck]]>=40}
				Any
					Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Missile}
					Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Melee}
		DO:	Chat {/ub quit}
	IF:	IntoPortal
		DO:	DoExpr {clearvar[CombatStuck]}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[Stuck, ToTN]}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
				SetOpt {EnableCombat} {False}
	IF:	BlockE F6820000
		DO:	DoAll
				DoExpr {setvar[Recall,1]}
				EmbedNav nav38 {[none]}
	IF:	All
			Expr {getvar[Recall]==0}
			Not BlockE F6820000
		DO:	DoAll
				DoExpr {actiontrycastbyid[2931]} ~~ SpellId 2931 is "Recall Aphus Lassel".
				SetState {ToTN}
	IF:	CellE 00070145
		DO:	DoAll
				SetState {ToStudy}
				DoExpr {clearvar[CombatStuck]}
				DoExpr {clearvar[Recall]}
	IF:	All
			Expr {getvar[Recall]==1}
			BlockE C8E90000
		DO:	DoAll
				DoExpr {setvar[Recall,0]}
				SetState {ToTN}
~~ }
STATE: {ToWest} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	All
			Expr {testvar[StateTimer]}
			Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=200}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	All
			Expr {getpvar[AdminSkip]==1}
			Expr {getfellowshipstatus[]==0}
		DO:	Chat {/ub fellow create xp}
	IF:	All
			Expr {getvar[PitStop]==2}
			Expr {getgvar[West]==1}
			CellE 93020171
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {clearvar[PitStop]}
				SetState {StudyCheck}
	IF:	Always
		DO:	DoAll
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0625]]`]}
				SetOpt {EnableCombat} {True}
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetOpt {LootOnlyRareCorpses} {False}
	IF:	CellE 93020171
		DO:	EmbedNav nav39 {ToWest.nav}
	IF:	All
			Expr {getvar[PitStop]==0}
			NavEmpty
			CellE 93020140
		DO:	DoAll
				SetOpt {EnableNav} {False}
				DoExpr {setvar[WestPitStop,1]}
				DoExpr {setvar[PitStop,1]}
				DoExpr {setpvar[StateName,ToWest]}
				DoExpr {setpvar[CheckSync,ToWestPitStopOne]}
				Chat {/vt meta load CheckPublic} ~~ ToWestPitStopOne
	IF:	All
			Expr {getvar[PitStop]==1}
			CellE 93020140
		DO:	DoAll
				SetOpt {EnableNav} {True}
				EmbedNav nav40 {WestToRoom.nav}
	IF:	All
			Expr {getvar[PitStop]==1}
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72316]]==7}
			CellE 93020140
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<8}
		DO:	DoAll
				SetOpt {EnableNav} {False}
				DoExpr {actiontryapplyitem[wobjectfindininventorybytemplatetype[72316],wobjectfindnearestbytemplatetype[72319]]}
	IF:	All
			Expr {getvar[PitStop]==1}
			CellE 93020140
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==1}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<8}
		DO:	SetOpt {EnableNav} {True}
	IF:	All
			Expr {getvar[PitStop]==1}
			ChatMatch {^The Door has been unlocked.}
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestdoor[]]}
	IF:	All
			Expr {getvar[PitStop]==1}
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72316]]==7}
			CellE 93020140
			SecsInStateGE 3
		DO:	SetState {ToWest}
	IF:	All
			SecsInStateGE 3
			CellE 9302013A
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<5}
		DO:	DoAll
				DoExpr {actiontryuseitem[wobjectfindnearestdoor[]]}
				SetState {ToWest}
	IF:	All
			SecsInStateGE 3
			CellE 9302013E
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<5}
		DO:	DoAll
				DoExpr {actiontryuseitem[wobjectfindnearestdoor[]]}
				SetState {ToWest}
	IF:	All
			Expr {getvar[PitStop]==1}
			CellE 93020136
			NavEmpty
		DO:	DoAll
				DoExpr {setvar[PitStop,2]}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.125]]`,`vtsetsetting[AttackDistance,cstr[0.0625]]`]}
				DoExpr {setpvar[StateName,ToWest]}
				DoExpr {setpvar[CheckSync,ToWestPitStopTwo]}
				Chat {/vt meta load CheckPublic} ~~ ToWestPitStopTwo
	IF:	All
			Expr {getvar[PitStop]==2}
			Any
				CellE 93020136
				CellE 93020135
				CellE 93020138
				CellE 93020139
				CellE 9302013A
				CellE 93020135
				CellE 93020137
			Expr {getpvar[Go]==0}
			Expr {getpvar[Leader]==1}
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72291]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72292]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72293]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72294]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72295]]==7}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72296]]==7}
		DO:	DoAll
				DoExpr {setgvar[West,1]}
				Chat {/f !Going}
	IF:	All
			Expr {getgvar[West]==1}
			ChatMatch {!Going}
		DO:	DoAll
				DoExpr {setpvar[Go,1]}
				EmbedNav nav41 {WestToDrop.nav}
	IF:	All
			Expr {getvar[PitStop]==2}
			Expr {getpvar[Leader]==1}
			NoMobsInDist 25
			Any
				CellE 93020136
				CellE 93020135
				CellE 93020138
				CellE 9302013A
				CellE 93020135
				CellE 93020137
				CellE 93020138
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72291]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72292]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72293]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72294]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72295]]==1}
				Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[72296]]==1}
			NavEmpty
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbytemplatetype[72309]]}
	IF:	All
			Expr {getvar[PitStop]==2}
			Expr {getpvar[Leader]==1}
			SecsInStateGE 3
			Any
				CellE 93020136
				CellE 93020135
				CellE 93020138
				CellE 9302013A
				CellE 93020135
				CellE 93020137
				CellE 93020138
		DO:	SetState {ToWest}
~~ }
STATE: {UseBook} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="50" title="STUCK"><control type="layout"><control type="button" name="STUCK" left="0" top="0" width="149" height="49" text="STUCK"  actionexpr="setgvar[Zstuck,1]" /></control></view>}
	IF:	Expr {getgvar[Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,QuestCheckPublic]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				Death
				ChatMatch {^Your fellow .* has died!$}
				BlockE C8E90000
				ChatMatch {!ManDown}
				ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Any
			Death
			Any
				BlockE C8E90000
		DO:	Chat {/f !ManDown}
	IF:	Any
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
		DO:	SetState {DeathRecall}
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==1}
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbytemplatetype[45680]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
		DO:	DoAll
				DoExpr {setgvar[AllDone,1]}
				Return
	IF:	Expr {getobjectinternaltype[wobjectfindininventorybytemplatetype[45680]]==7}
		DO:	Return
	IF:	SecsInStateGE 3
		DO:	SetState {UseBook}
~~ }
STATE: {Zstuck} ~~ {
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load QuestCheckPublic}
~~ }

~~========================= ONLY NAVS APPEAR BELOW THIS LINE =========================~~

NAV: nav0 once ~~ {
	pnt 16.0503074645996 -100.818904018402 2.08333134651184E-05
	pnt 16.0674841245015 -100.792764345805 2.08333134651184E-05
~~ }
NAV: nav1 once ~~ {
	pnt 16.065434773763 -100.40025185744 2.08333134651184E-05
	pnt 16.0610793749491 -100.465137410164 2.08333134651184E-05
	pnt 16.0422614415487 -100.469920619329 2.08333134651184E-05
	pnt 16.0079350789388 -100.474897297223 2.08333134651184E-05
	pnt 15.9787255922953 -100.476611089706 2.08333134651184E-05
	pnt 15.9753805478414 -100.46203593413 2.08333134651184E-05
~~ }
NAV: nav2 once ~~ {
	pnt 16.0567105929057 -100.43434073925 2.08333134651184E-05
	pnt 16.0079561551412 -100.432539661725 2.08333134651184E-05
	pnt 15.9819134076436 -100.432739035288 2.08333134651184E-05
~~ }
NAV: nav3 once ~~ {
	pnt 16.0633646965027 -100.412726084391 2.08333134651184E-05
	pnt 16.0297427495321 -100.39732910792 2.08333134651184E-05
	pnt 16.0124450683594 -100.393690387408 2.08333134651184E-05
	pnt 15.9818570772807 -100.389543763796 2.08333134651184E-05
~~ }
NAV: nav4 once ~~ {
	pnt 16.0633646965027 -100.412726084391 2.08333134651184E-05
	pnt 16.0297427495321 -100.39732910792 2.08333134651184E-05
	pnt 16.026303990682 -100.397107783953 2.08333134651184E-05
	pnt 16.0254968643188 -100.351726925746 2.08333134651184E-05
	pnt 16.0260843594869 -100.349259468416 2.08333134651184E-05
~~ }
NAV: nav5 once ~~ {
	pnt 16.0687624295553 -100.413636187712 2.08333134651184E-05
	pnt 16.1077858924866 -100.387462194761 2.08333134651184E-05
	pnt 16.1091143608093 -100.375939377149 2.08333134651184E-05
	pnt 16.1117626825968 -100.35282482033 2.08333134651184E-05
~~ }
NAV: nav6 once ~~ {
	pnt 16.0687624295553 -100.413636187712 2.08333134651184E-05
	pnt 16.1136008580526 -100.393051330249 2.08333134651184E-05
	pnt 16.1229774475098 -100.393133719762 2.08333134651184E-05
	pnt 16.1484647432963 -100.393329632282 2.08333134651184E-05
~~ }
NAV: nav7 once ~~ {
	pnt 16.0641545931498 -100.407645455996 2.08333134651184E-05
	pnt 16.0967128117879 -100.432831525803 2.08333134651184E-05
	pnt 16.1231139818827 -100.43393553098 2.08333134651184E-05
	pnt 16.1492260297139 -100.438294315338 2.08333134651184E-05
	pnt 16.1560559590658 -100.437959361076 2.08333134651184E-05
~~ }
NAV: nav8 once ~~ {
	pnt 16.0670387268066 -100.434310690562 2.08333134651184E-05
	pnt 16.0676506996155 -100.467268276215 2.08333134651184E-05
	pnt 16.1010248819987 -100.473640227318 2.08333134651184E-05
	pnt 16.1295114835103 -100.474986783663 2.08333134651184E-05
	pnt 16.1504865646362 -100.480141282082 2.08333134651184E-05
	pnt 16.1530423164368 -100.480578462283 2.08333134651184E-05
~~ }
NAV: nav9 once ~~ {
	pnt 15.9809386253357 -100.477242469788 2.08333134651184E-05
	pnt 15.9947640736898 -100.476465161641 2.08333134651184E-05
	pnt 16.0152517318726 -100.476584688822 2.08333134651184E-05
	pnt 16.0646149317424 -100.395859066645 2.08333134651184E-05
~~ }
NAV: nav10 once ~~ {
	pnt 15.9792917251587 -100.432868631681 2.08333134651184E-05
	pnt 16.0025563875834 -100.433095550537 2.08333134651184E-05
	pnt 16.0130438168844 -100.433206788699 2.08333134651184E-05
	pnt 16.0646149317424 -100.395859066645 2.08333134651184E-05
~~ }
NAV: nav11 once ~~ {
	pnt 15.9774846394857 -100.392729266485 2.08333134651184E-05
	pnt 15.9985237121582 -100.392859594027 2.08333134651184E-05
	pnt 16.0117271741231 -100.392642446359 2.08333134651184E-05
	pnt 16.0673170089722 -100.401890317599 2.08333134651184E-05
~~ }
NAV: nav12 once ~~ {
	pnt 16.0233669916789 -100.347721531987 2.08333134651184E-05
	pnt 16.0242325464884 -100.39554665486 2.08333134651184E-05
	pnt 16.0632823944092 -100.401254932086 2.08333134651184E-05
~~ }
NAV: nav13 once ~~ {
	pnt 16.1067180633545 -100.358768145243 2.08333134651184E-05
	pnt 16.1091006596883 -100.384710808595 2.08333134651184E-05
	pnt 16.1041352589925 -100.39389440616 2.08333134651184E-05
	pnt 16.0674468040466 -100.400639939308 2.08333134651184E-05
~~ }
NAV: nav14 once ~~ {
	pnt 16.1543548901876 -100.39196353356 2.08333134651184E-05
	pnt 16.1229292233785 -100.391885972023 2.08333134651184E-05
	pnt 16.0654840787252 -100.394416073958 2.08333134651184E-05
~~ }
NAV: nav15 once ~~ {
	pnt 16.1518401145935 -100.434330280622 2.08333134651184E-05
	pnt 16.1285652160645 -100.431836605072 2.08333134651184E-05
	pnt 16.0981194814046 -100.436678441366 2.08333134651184E-05
	pnt 16.0727787335714 -100.434499740601 2.08333134651184E-05
	pnt 16.0670647621155 -100.398538955053 2.08333134651184E-05
~~ }
NAV: nav16 once ~~ {
	pnt 16.1517845153809 -100.475465758642 2.08333134651184E-05
	pnt 16.1153683980306 -100.474483108521 2.08333134651184E-05
	pnt 16.0826784769694 -100.473060528437 2.08333134651184E-05
	pnt 16.074230893453 -100.448211193085 2.08333134651184E-05
	pnt 16.0677123069763 -100.405270032088 2.08333134651184E-05
	pnt 16.065304629008 -100.398664947351 2.08333134651184E-05
~~ }
NAV: nav17 circular ~~ {
~~ }
NAV: nav18 once ~~ {
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
	chk -8.82469765345255 85.3301910003026 0.457081604003906
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
~~ }
NAV: nav19 once ~~ {
	pnt 16.0665064811707 -100.487911876043 2.08333134651184E-05
	pnt 16.0669137001038 -100.440101353327 2.08333134651184E-05
	pnt 16.065434773763 -100.40025185744 2.08333134651184E-05
~~ }
NAV: nav20 circular ~~ {
~~ }
NAV: nav21 once ~~ {
	pnt 16.0667832374573 -100.978643798828 2.08333134651184E-05
	pnt 16.0691910425822 -100.854351202647 2.08333134651184E-05
	pnt 15.9989410400391 -100.84697488149 2.08333134651184E-05
	pnt 15.9380880355835 -100.849851067861 2.08333134651184E-05
	pnt 15.9415347099304 -100.804343827566 2.08333134651184E-05
	pnt 15.7924656709035 -100.813812096914 2.08333134651184E-05
	pnt 15.8542870839437 -100.810164515177 2.08333134651184E-05
	pnt 15.9028910001119 -100.809433937073 2.08333134651184E-05
	pnt 15.9464694341024 -100.808167362213 2.08333134651184E-05
	pnt 15.941265741984 -100.842797470093 2.08333134651184E-05
	pnt 15.9433259646098 -100.854740333557 2.08333134651184E-05
	pnt 16.0003667195638 -100.850280952454 2.08333134651184E-05
	pnt 16.0519539515177 -100.848547744751 2.08333134651184E-05
	pnt 16.1259688695272 -100.848268636068 2.08333134651184E-05
	pnt 16.1496311823527 -100.849990971883 2.08333134651184E-05
	pnt 16.1528433481852 -100.865044403076 2.08333134651184E-05
	pnt 16.1509513219198 -100.895416005452 2.08333134651184E-05
	pnt 16.2151758829753 -100.893123626709 2.08333134651184E-05
	pnt 16.2569067637126 -100.893206787109 2.08333134651184E-05
	pnt 16.3117636998494 -100.890854644775 2.08333134651184E-05
	pnt 16.3178064982096 -100.8936987559 2.08333134651184E-05
	pnt 16.3195013046265 -100.86128209432 0.00608396331469218
	pnt 16.3167900085449 -100.813501103719 0.0250208338101705
	pnt 16.3149939219157 -100.765862719218 0.0250208338101705
	pnt 16.3275497436523 -100.761812241872 0.0250208338101705
	pnt 16.4096088409424 -100.770649814606 0.0250208338101705
	pnt 16.3672218322754 -100.763031578064 0.0250208338101705
	pnt 16.313337580363 -100.764785194397 0.0250208338101705
	pnt 16.3153270721436 -100.802703984578 0.0250208338101705
	pnt 16.3152351379395 -100.84950243632 0.0131517509619395
	pnt 16.3157989501953 -100.880588658651 2.08333134651184E-05
	pnt 16.3158410390218 -100.895548629761 2.08333134651184E-05
	pnt 16.3016810099284 -100.896065648397 2.08333134651184E-05
	pnt 16.2636543273926 -100.895722452799 2.08333134651184E-05
	pnt 16.2309692382813 -100.893294270833 2.08333134651184E-05
	pnt 16.1909072875977 -100.88980623881 2.08333134651184E-05
	pnt 16.1519439061483 -100.89225285848 2.08333134651184E-05
	pnt 16.1490072250366 -100.878851318359 2.08333134651184E-05
	pnt 16.1476872762044 -100.84634513855 2.08333134651184E-05
	pnt 16.1393109639486 -100.846783701579 2.08333134651184E-05
	pnt 16.1106646855672 -100.849412345886 2.08333134651184E-05
	pnt 16.0735939979553 -100.845966084798 2.08333134651184E-05
	pnt 16.0589893658956 -100.855166053772 2.08333134651184E-05
	pnt 16.060374323527 -100.879838689168 2.08333134651184E-05
	pnt 16.0643398920695 -100.899819819132 2.08333134651184E-05
	pnt 16.0667130152384 -100.924693806966 2.08333134651184E-05
	pnt 16.0662010192871 -100.95122235616 2.08333134651184E-05
	pnt 16.065683110555 -100.978059768677 2.08333134651184E-05
	pnt 16.0650698661804 -100.981963793437 2.08333134651184E-05
~~ }
NAV: nav22 once ~~ {
	pnt 16.0677471160889 -100.986650212606 2.08333134651184E-05
	pnt 16.0676142692566 -100.927958679199 2.08333134651184E-05
	pnt 16.0672257741292 -100.895906956991 2.08333134651184E-05
	pnt 16.0668878555298 -100.852113596598 2.08333134651184E-05
	pnt 16.0494101524353 -100.822102006276 2.08333134651184E-05
~~ }
NAV: nav23 once ~~ {
	pnt 16.0677471160889 -100.986650212606 2.08333134651184E-05
	pnt 16.0676142692566 -100.927958679199 2.08333134651184E-05
	pnt 16.0672257741292 -100.895906956991 2.08333134651184E-05
	pnt 16.0668878555298 -100.852113596598 2.08333134651184E-05
	pnt 16.0494101524353 -100.822102006276 2.08333134651184E-05
	pnt 16.0503074645996 -100.818904018402 2.08333134651184E-05
	pnt 16.0674841245015 -100.792764345805 2.08333134651184E-05
~~ }
NAV: nav24 once ~~ {
	pnt 16.0666666666667 -100.973853111267 2.08333134651184E-05
	pnt 16.0666666666667 -100.961202939351 2.08333134651184E-05
	pnt 16.0666666666667 -100.926158014933 2.08333134651184E-05
	pnt 16.0692265510559 -100.852599875132 2.08333134651184E-05
	pnt 16.122229162852 -100.851265589396 2.08333134651184E-05
	pnt 16.1541738510132 -100.850196170807 2.08333134651184E-05
	pnt 16.1502263387044 -100.896443557739 2.08333134651184E-05
	pnt 16.2252268473307 -100.894144630432 2.08333134651184E-05
	pnt 16.2908849080404 -100.891789881388 2.08333134651184E-05
	pnt 16.3184450149536 -100.894668579102 2.08333134651184E-05
	pnt 16.3162325541178 -100.865482648214 0.00356362735231717
	pnt 16.3168760935466 -100.830346012115 0.0246456066767375
	pnt 16.3169556299845 -100.762618637085 0.0250208338101705
	pnt 16.4077290852865 -100.767076396942 0.0250208338101705
	pnt 16.3723389943441 -100.766356150309 0.0250208338101705
	pnt 16.3280117670695 -100.766050434113 0.0250208338101705
	pnt 16.2642295201619 -100.766623814901 0.0250208338101705
~~ }
NAV: nav25 once ~~ {
	pnt 16.2642295201619 -100.766623814901 0.0250208338101705
	pnt 16.2366230646769 -100.767133522034 0.0250208338101705
~~ }
NAV: nav26 once ~~ {
	pnt 16.2357474009196 -100.767256832123 0.0250208338101705
	pnt 16.2429484049479 -100.766338507334 0.0250208338101705
	pnt 16.2521249771118 -100.766959063212 0.0250208338101705
	pnt 16.2603400548299 -100.767514546712 0.0250208338101705
	pnt 16.2707136789958 -100.76821603775 0.0250208338101705
	pnt 16.3171460469564 -100.767650763194 0.0250208338101705
	pnt 16.3165123621623 -100.811467393239 0.0250208338101705
	pnt 16.3162261327108 -100.831707572937 0.0238286693890889
	pnt 16.315311050415 -100.895689646403 2.08333134651184E-05
	pnt 16.2181486129761 -100.891219456991 2.08333134651184E-05
	pnt 16.1452674865723 -100.891603469849 2.08333134651184E-05
	pnt 16.1492081324259 -100.848504670461 2.08333134651184E-05
	pnt 16.066743628184 -100.84873603185 2.08333134651184E-05
	pnt 16.0675107638041 -100.905600992839 2.08333134651184E-05
	pnt 16.0684560457865 -100.975396855672 2.08333134651184E-05
~~ }
NAV: nav27 once ~~ {
	pnt -43.9909442265828 -65.3768518447876 -0.0616458376248678
	pnt -43.9685587882996 -65.375479443868 -0.0616458376248678
	pnt -43.969073899587 -65.3904029846191 -0.0616458376248678
	pnt -43.9694175720215 -65.4089316050212 -0.0616458376248678
	pnt -43.9743517875671 -65.4283034960429 -0.0616458376248678
	pnt -43.9909407615662 -65.4469042142232 -0.0616458376248678
	pnt -44.0121145884196 -65.4608654658 -0.0616458376248678
	pnt -44.014192422231 -65.4607540448507 -0.0616458376248678
	pnt -44.0125258127848 -65.4502241452535 -0.0616458296775818
	pnt -44.0134749412537 -65.4086219787598 -0.0481630166371663
	pnt -44.0127085049947 -65.3969526290894 -0.0399791717529297
	pnt -44.0119801521301 -65.3680211385091 -0.0399791717529297
	pnt -43.999417813619 -65.3674780527751 -0.0399791717529297
	pnt -44.0009127616882 -65.3743658065796 -0.0399791717529297
	pnt -44.0003587086995 -65.3817258199056 -0.0372314135233561
	pnt -43.9993944168091 -65.4029059727987 -0.020287291208903
	pnt -44.0005715052287 -65.4204442977905 -0.0183124999205271
	pnt -43.9866005579631 -65.4235899289449 -0.0183124999205271
	pnt -43.9882276852926 -65.4009953180949 -0.0130616952975591
	pnt -43.9865891774495 -65.3612403869629 0.00335416793823242
	pnt -44.0109764099121 -65.3622908274333 0.00335416793823242
	pnt -44.0142505009969 -65.3715934753418 0.00335416793823242
	pnt -44.0141796112061 -65.3992595672607 -0.0116730938355128
	pnt -44.013722038269 -65.4566925684611 -0.0389569640159607
	pnt -44.0133527755737 -65.4706135114034 -0.0399791717529297
	pnt -44.0063266436259 -65.4703720728556 -0.0399791717529297
	pnt -43.9897309939067 -65.4697717984517 -0.0399791717529297
	pnt -43.9726015408834 -65.4476876894633 -0.0399791717529297
~~ }
NAV: nav28 once ~~ {
	pnt 16.0673163731893 -100.796639696757 2.08333134651184E-05
	pnt 16.0662396113078 -100.762508773804 2.08333134651184E-05
	pnt 16.0655367215474 -100.726958910624 2.08333134651184E-05
	pnt 16.0683990160624 -100.681629689535 2.08333134651184E-05
	pnt 16.0210202534993 -100.68279466629 2.08333134651184E-05
	pnt 16.0237753868103 -100.641899681091 2.08333134651184E-05
	pnt 16.0684946695964 -100.643220678965 2.08333134651184E-05
	pnt 16.0671746571859 -100.602910264333 2.08333134651184E-05
~~ }
NAV: nav29 once ~~ {
	pnt 16.0671746571859 -100.602910264333 2.08333134651184E-05
	pnt 16.0670484860738 -100.576017189026 2.08333134651184E-05
	pnt 16.0663605372111 -100.550119670232 2.08333134651184E-05
	pnt 16.0661685625712 -100.516966756185 2.08333134651184E-05
	pnt 16.0666381518046 -100.489337730408 2.08333134651184E-05
	pnt 16.0655186653137 -100.486050637563 2.08333134651184E-05
~~ }
NAV: nav30 once ~~ {
	pnt 16.0670379002889 -100.982782173157 2.08333134651184E-05
	pnt 16.0676991780599 -100.998670450846 2.08333134651184E-05
	pnt 16.0653105099996 -101.027633921305 2.08333134651184E-05
	pnt 16.0646656354268 -101.062756983439 -0.0124791661898295
	pnt 16.113106918335 -101.057080332438 -0.0374791701634725
	pnt 16.1117272059123 -101.10490805308 -0.0499791701634725
	pnt 16.0226613998413 -101.099682108561 -0.0499791701634725
	pnt 16.023236211141 -101.142580858866 -0.0499791701634725
	pnt 15.9445531845093 -101.141967264811 -0.0499791701634725
	pnt 15.8904941717784 -101.142797406514 -0.0499791701634725
	pnt 15.8568278948466 -101.139562479655 -0.0499791701634725
	pnt 15.8574007193247 -101.100347709656 -0.0499791701634725
	pnt 15.7986437638601 -101.099589665731 -0.0499791701634725
	pnt 15.778511039416 -101.100501696269 -0.0499791701634725
~~ }
NAV: nav31 once ~~ {
	pnt 15.778511039416 -101.100501696269 -0.0499791701634725
	pnt 15.7904132684072 -101.101547876994 -0.0499791701634725
	pnt 15.8103367805481 -101.102144432068 -0.0499791701634725
	pnt 15.8607410271962 -101.101613235474 -0.0499791701634725
	pnt 15.8583484490712 -101.057110404968 -0.0499791701634725
	pnt 15.8665781021118 -101.057955869039 -0.0499791701634725
	pnt 15.883117723465 -101.058181063334 -0.0499791701634725
	pnt 15.940512752533 -101.060754712423 -0.0499791701634725
	pnt 15.9413856188456 -101.071763737996 -0.0499791701634725
	pnt 15.9396489779154 -101.099960581462 -0.0499791701634725
	pnt 15.939679368337 -101.116169102987 -0.0499791701634725
	pnt 15.9413297653198 -101.126937611898 -0.0499791701634725
	pnt 15.9406488418579 -101.16064751943 -0.0499791701634725
~~ }
NAV: nav32 once ~~ {
	pnt 15.9403732617696 -101.160927708944 -0.0499791701634725
	pnt 15.9416677474976 -101.186220423381 -0.0499791701634725
~~ }
NAV: nav33 once ~~ {
	pnt 15.9416677474976 -101.186220423381 -0.0499791701634725
	pnt 15.938579750061 -101.1476451238 -0.0499791701634725
	pnt 16.0001940409342 -101.141866811117 -0.0499791701634725
	pnt 16.0283417701721 -101.142268244425 -0.0499791701634725
	pnt 16.0248014450073 -101.099965413411 -0.0499791701634725
	pnt 16.109798113505 -101.099199549357 -0.0499791701634725
	pnt 16.110621547699 -101.053430112203 -0.0374791701634725
	pnt 16.0646621704102 -101.057375717163 -0.0124791661898295
	pnt 16.0634291648865 -101.031787172953 2.08333134651184E-05
	pnt 16.0665565172831 -100.97433274587 2.08333134651184E-05
~~ }
NAV: nav34 once ~~ {
	pnt -101.658333333333 -96.6833333333333 2.08333134651184E-05
	pnt -101.611166954041 -96.6419494311015 2.08333134651184E-05
	pnt -101.5855052948 -96.6413749376933 2.08333134651184E-05
	pnt -101.545173676809 -96.6409120559692 2.08333134651184E-05
	pnt -101.537556139628 -96.6474363962809 2.08333134651184E-05
	pnt -101.539312934875 -96.6779697100321 2.08333134651184E-05
	pnt -101.536251894633 -96.6887005488078 2.08333134651184E-05
	pnt -101.537138080597 -96.6928910573324 2.08333134651184E-05
	chk -101.537138080597 -96.6928910573324 2.08333134651184E-05
	ptl 95.4570833206177 2.25772916475932 0.24168750445048 -101.533420848846 -96.7096000035604 -0.000262499845121056 14 {Portal to Tou-Tou}
~~ }
NAV: nav35 once ~~ {
	pnt 94.6723951339722 -30.4194783528646 0.0833541631698608
	pnt 94.6513591130575 -30.4281532923381 0.0833541631698608
	pnt 94.6343150456746 -30.4346515973409 0.0833541631698608
	pnt 94.613849957784 -30.44313732783 0.0833541631698608
	pnt 94.5949050267538 -30.4514008204142 0.0833541631698608
	pnt 94.5882129669189 -30.4545146624247 0.0833541631698608
	pnt 94.582377020518 -30.4584347089132 0.0833541631698608
	ptl 95.4570833206177 2.25772916475932 0.24168750445048 94.5650791803996 -30.4658629099528 0.0830708369612694 14 {Snowy Valley Portal}
~~ }
NAV: nav36 once ~~ {
	pnt -8.82469765345255 85.3301910003026 0.457081604003906
	pnt -8.7253155708313 85.1998685836792 0.49376646677653
	pnt -8.61119333902995 85.0601567586263 0.534048843383789
	pnt -8.40912691752116 84.8641036669413 0.635119247436523
	pnt -8.19454445838928 84.6561324437459 0.749396959940592
	pnt -7.93741785685221 84.4523794576526 0.748122088114421
	pnt -7.65768496195475 84.1820381800334 0.692327880859375
	pnt -7.48431157271067 83.9961692810059 0.665060869852702
	pnt -7.33339029947917 83.734031867981 0.637535031636556
	pnt -7.20447572072347 83.4667987823486 0.60844612121582
	pnt -7.07107969919841 83.2360516866048 0.608777809143066
	pnt -6.96301968892415 83.1074484507243 0.613913599650065
	pnt -6.84513727823893 83.0504468282064 0.607762781778971
	pnt -6.63406151930491 82.988328965505 0.613572692871094
	pnt -6.52816985448202 82.9345548629761 0.640630849202474
	pnt -6.43572174708048 82.9219340324402 0.666687456766764
	pnt -6.39766213099162 82.9353597640991 0.666687456766764
~~ }
NAV: nav37 once ~~ {
	chk -6.40001916885376 82.919054778417 0.666687456766764
	pnt -6.39864927927653 82.9121149420738 0.66508846282959
	pnt -6.39983994166056 82.869545185566 0.644030570983887
	pnt -6.40190862019857 82.8079360723495 0.607065073649089
	pnt -6.39950749079386 82.7692954699198 0.595020802815755
	pnt -6.38832569122314 82.7671512842178 0.595020802815755
	pnt -6.35507704416911 82.7668019533157 0.595020802815755
	pnt -6.32471984227498 82.7673335313797 0.595020802815755
	pnt -6.30999116897583 82.7775758345922 0.595020802815755
	chk -6.30999116897583 82.7775758345922 0.595020802815755
	ptl -6.40001916885376 82.919054778417 0.666687456766764 -6.32206665674845 82.8085689981778 0.594737470149994 14 {Geraine's Study}
	pau -6.40001916885376 82.919054778417 0.666687456766764 3000
~~ }
NAV: nav38 once ~~ {
	pnt 95.4566380818685 2.26212631861369 0.24168750445048
	pnt 95.4576773325602 2.29519685109456 0.24168750445048
	chk 95.4576773325602 2.29519685109456 0.24168750445048
	ptl 95.4488681793213 2.26419467926025 0.24168750445048 95.4555708567301 2.31398749351501 0.242491692304611 14 {Portal to Town Network}
~~ }
NAV: nav39 once ~~ {
	pnt 16.0685872077942 -100.970943832397 2.08333134651184E-05
	pnt 16.0679555892944 -100.949569320679 2.08333134651184E-05
	pnt 16.0687176704407 -100.920777511597 2.08333134651184E-05
	pnt 16.0671619415283 -100.899852498372 2.08333134651184E-05
	pnt 16.0691807428996 -100.854036903381 2.08333134651184E-05
	pnt 16.0360146840413 -100.848909695943 2.08333134651184E-05
	pnt 16.0136564890544 -100.84835729599 2.08333134651184E-05
	pnt 15.9418646176656 -100.850308990479 2.08333134651184E-05
	pnt 15.9451430638631 -100.805914560954 2.08333134651184E-05
	pnt 15.8752908547719 -100.808341821035 2.08333134651184E-05
	pnt 15.7787134567897 -100.807665761312 2.08333134651184E-05
	pnt 15.854034837087 -100.849279085795 2.08333134651184E-05
	pnt 15.7629160404205 -100.849203046163 2.08333134651184E-05
~~ }
NAV: nav40 once ~~ {
	pnt 15.7629160404205 -100.849203046163 2.08333134651184E-05
	pnt 15.7311286052068 -100.850366814931 2.08333134651184E-05
	pnt 15.7332795381546 -100.765316899618 2.08333134651184E-05
	pnt 15.7366453250249 -100.723247432709 2.08333134651184E-05
	pnt 15.7171524763107 -100.723516019185 2.08333134651184E-05
	pnt 15.6892113566399 -100.720474433899 2.08333134651184E-05
	pnt 15.6536254023512 -100.719676399231 2.08333134651184E-05
	pnt 15.6513284458468 -100.737183539073 2.08333134651184E-05
	pnt 15.653379346927 -100.767480945587 2.08333134651184E-05
	pnt 15.6523120371004 -100.771303208669 2.08333134651184E-05
	pnt 15.6485980654756 -100.752668603261 2.08333134651184E-05
	pnt 15.6440711826086 -100.713071314494 2.08333134651184E-05
	pnt 15.6532795769473 -100.676614316305 2.08333134651184E-05
	pnt 15.6549482191602 -100.719962247213 2.08333134651184E-05
~~ }
NAV: nav41 once ~~ {
	pnt 15.6579029450814 -100.724199517568 2.08333134651184E-05
	pnt 15.6903113762538 -100.725166829427 2.08333134651184E-05
	pnt 15.704079969724 -100.726373291016 2.08333134651184E-05
	pnt 15.7107158581416 -100.725220394135 2.08333134651184E-05
	pnt 15.7300274848938 -100.723206361135 2.08333134651184E-05
	pnt 15.7364995797475 -100.725698566437 2.08333134651184E-05
	pnt 15.7307638963064 -100.854497655233 2.08333134651184E-05
	pnt 15.7498320500056 -100.851471296946 2.08333134651184E-05
	pnt 15.8386736075083 -100.836396153768 2.08333134651184E-05
	pnt 15.8598604520162 -100.814606889089 2.08333134651184E-05
	pnt 15.869588915507 -100.80742371877 2.08333134651184E-05
	pnt 15.9422291119893 -100.809104029338 2.08333134651184E-05
	pnt 15.9390921274821 -100.853499921163 2.08333134651184E-05
	pnt 16.0142468452454 -100.84956852595 2.08333134651184E-05
	pnt 16.0690452575684 -100.853823661804 2.08333134651184E-05
	pnt 16.0669807751973 -100.906284141541 2.08333134651184E-05
	pnt 16.0659654935201 -100.97480875651 2.08333134651184E-05
~~ }
