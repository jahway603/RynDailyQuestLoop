~~ {
~~ FOR AUTO-COMPLETION ASSISTANCE: testvar getvar setvar touchvar clearallvars clearvar getcharintprop getchardoubleprop getcharquadprop getcharboolprop getcharstringprop getisspellknown getcancastspell_hunt getcancastspell_buff getcharvital_base getcharvital_current getcharvital_buffedmax getcharskill_traininglevel getcharskill_base getcharskill_buffed getplayerlandcell getplayercoordinates coordinategetns coordinategetwe coordinategetz coordinatetostring coordinateparse coordinatedistancewithz coordinatedistanceflat wobjectgetphysicscoordinates wobjectgetname wobjectgetobjectclass wobjectgettemplatetype wobjectgetisdooropen wobjectfindnearestmonster wobjectfindnearestdoor wobjectfindnearestbyobjectclass wobjectfindininventorybytemplatetype wobjectfindininventorybyname wobjectfindininventorybynamerx wobjectgetselection wobjectgetplayer wobjectfindnearestbynameandobjectclass actiontryselect actiontryuseitem actiontryapplyitem actiontrygiveitem actiontryequipanywand actiontrycastbyid actiontrycastbyidontarget chatbox chatboxpaste statushud statushudcolored uigetcontrol uisetlabel isfalse istrue iif randint cstr strlen getobjectinternaltype cstrf stopwatchcreate stopwatchstart stopwatchstop stopwatchelapsedseconds cnumber floor ceiling round abs getworldname getitemcountininventorybyname getheading getitemcountininventorybynamerx getheadingto actiontrygiveprofile vitae getfellowshipstatus getfellowshipname getfellowshipisopen getfellowshipisleader getfellowshipleaderid getfellowshipcanrecruit getfellowid getfellowshipcount getfellowshiplocked getfellowname getfellowshipisfull sin cos tan sqrt asin acos atan atan2 sinh cosh tanh vtsetmetastate getregexmatch echo chr ord wobjectgetid wobjectgethealth wobjectfindbyid wobjectgetintprop wobjectfindnearestbytemplatetype wobjectgetopencontainer testquestflag getquestktprogress isrefreshingquests getquestktrequired getqueststatus getisday getgamehour getgamehourname getisnight getgameday getgameticks getminutesuntilday getgamemonth getgamemonthname getminutesuntilnight getgameyear uisetvisible uiviewvisible uiviewexists getgvar touchgvar getpvar touchpvar setgvar cleargvar setpvar clearpvar testgvar clearallgvars testpvar clearallpvars dictgetitem dictcreate dicthaskey dictadditem dictkeys dictremovekey dictvalues dictclear dictsize dictcopy listgetitem listpop listcreate listcontains listremove listadd listindexof listremoveat listinsert listlastindexof listclear listcopy listcount listreverse

~~																						
~~ File auto-generated by metaf, a program created by Eskarina of Morningthaw/Coldeve.	
~~		Get metaf here: https://github.com/JJEII/metaf/									
~~																						
~~ All recognized structural designators:												
~~		STATE:				DO:															
~~		IF:					NAV:														
~~																						
~~ All recognized CONDITION (IF:) operation keywords:									
~~		Never				NavEmpty			MobsInDist_Priority		Not				
~~		Always				Death				NeedToBuff				PSecsInStateGE	
~~		All					VendorOpen			NoMobsInDist			SecsOnSpellGE	
~~		Any					VendorClosed		BlockE					BuPercentGE		
~~		ChatMatch			ItemCountLE			CellE					DistToRteGE		
~~		MainSlotsLE			ItemCountGE			IntoPortal				Expr			
~~		SecsInStateGE		MobsInDist_Name		ExitPortal				ChatCapture		
~~																						
~~ All recognized ACTION (DO:) operation keywords:										
~~		None				EmbedNav			ChatExpr				SetOpt			
~~		SetState			CallState			SetWatchdog				CreateView		
~~		Chat				Return				ClearWatchdog			DestroyView		
~~		DoAll				DoExpr				GetOpt					DestroyAllViews	
~~																						
~~ All recognized NAV types:															
~~		circular			follow														
~~		linear				once														
~~																						
~~ All recognized NAV NODE types:														
~~		flw					vnd															
~~		pnt					ptl															
~~		rcl					tlk															
~~		pau					chk															
~~		cht					jmp															
~~		prt (deprecated in VTank)														
~~ }																					

STATE: {BookcaseOne} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<5}
			Expr {getpvar[Leader]==1}
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbytemplatetype[51413]]}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==1}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<5}
		DO:	EmbedNav nav0 {junk.nav}
	IF:	All
			CellE 58700311
			NavEmpty
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToPit]}
				DoExpr {setpvar[CheckSync,ToPit]}
				Chat {/vt meta load RynDQLCheck}
	IF:	SecsInStateGE 7
		DO:	SetState {BookcaseOne}
~~ }
STATE: {BookcaseTwo} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<5}
			Expr {getpvar[Leader]==1}
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbytemplatetype[51414]]}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==1}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<5}
		DO:	EmbedNav nav1 {junk.nav}
	IF:	All
			CellE 587001AB
			NavEmpty
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToLightningRoom]}
				DoExpr {setpvar[CheckSync,ToLightningRoom]}
				Chat {/vt meta load RynDQLCheck}
				SetOpt {EnableCombat} {True}
	IF:	SecsInStateGE 7
		DO:	SetState {BookcaseTwo}
~~ }
STATE: {Bosses} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Not Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete]}
		DO:	DoAll
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete,listcreate[]]}
				SetState {Bosses}
	IF:	Expr {getpvar[QuestCompletedSkip]==1}
		DO:	DoExpr {setpvar[LegendaryKey,getitemcountininventorybyname[Legendary Key]]}
	IF:	All
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete]}
			Not Expr {listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getcharstringprop[1]]}
			Any
				Expr {getpvar[QuestCompletedSkip]==1}
				Expr {getitemcountininventorybyname[Legendary Key]==getpvar[LegendaryKey]]}
		DO:	DoAll
				DoExpr {listadd[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getcharstringprop[1]]}
				SetState {Bosses}
	IF:	All
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete]}
			Any
				Expr {getpvar[FellowCount]==1&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]}
				Expr {getpvar[FellowCount]==2&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]}
				Expr {getpvar[FellowCount]==3&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameThree]]}
				Expr {getpvar[FellowCount]==4&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFour]]}
				Expr {getpvar[FellowCount]==5&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFive]]}
				Expr {getpvar[FellowCount]==6&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameSix]]}
				Expr {getpvar[FellowCount]==7&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameSeven]]}
				Expr {getpvar[FellowCount]==8&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameEight]]}
				Expr {getpvar[FellowCount]==9&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameEight]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete],getpvar[FellowNameNine]]}
				All
					Expr {getpvar[AdminSkip]==1}
					Expr {getitemcountininventorybyname[Legendary Key]==getpvar[LegendaryKey]]}
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,GoTurnin]}
				DoExpr {setpvar[CheckSync,GoTurnin]}
				DoExpr {setpvar[Step,1]}
				Chat {/vt meta load RynDQLCheck}
	IF:	CellE 5870010C
		DO:	DoAll
				EmbedNav nav2 {[none]}
				SetOpt {DoorLockpickDiffExcessThreshold} {-50}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.25]]`,`vtsetsetting[AttackDistance,cstr[0.625]]`]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getobjectinternaltype[wobjectfindnearestbytemplatetype[51379]]==7}
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbytemplatetype[51379]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Any
				ChatMatch {^The cage's energy field suddenly arcs and hits you}
				ChatMatch {^As you reach towards Kul Bronzegear, the Gearknight begins to speak.}
		DO:	DoAll
				EmbedNav nav3 {[none]}
				SetOpt {NavPriorityBoost} {True}
	IF:	Expr {getpvar[Leader]==0}
		DO:	DoAll
				EmbedNav nav4 {[none]}
				SetOpt {NavPriorityBoost} {True}
	IF:	MobsInDist_Name 1 80 {Aun Siminua}
		DO:	DoAll
				EmbedNav nav5 {[none]}
				SetOpt {NavPriorityBoost} {True}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestbynameandobjectclass[27,Corpse of Kul Bronzegear]]==7}
			Expr {getitemcountininventorybyname[Legendary Key]<getpvar[LegendaryKey]]}
			Expr {getpvar[QuestCompletedSkip]==0}
			NoMobsInDist 40
			Any
				Not MobsInDist_Name 1 80 {Aun Siminua}
				Not MobsInDist_Name 1 50 {Kul Bronzegear}
				Not MobsInDist_Name 1 50 {Oggma}
		DO:	DoAll
				DoExpr {setvar[CorpseName,Corpse of Kul Bronzegear]]}
				DoExpr {setvar[LootItem,Legendary Key]}
				DoExpr {setvar[LootRange,25]}
				DoExpr {listadd[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter],getcharstringprop[1]]}
				DoExpr {listadd[getgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter],getcharstringprop[1]]}
				DoExpr {setvar[LootReturn,Bosses]}
				DoExpr {clearvar[StateTimer]}
				CallState {Loot} {Bosses}
	IF:	Expr {getobjectinternaltype[wobjectgetopencontainer[]]==7}
		DO:	DoAll
				DoExpr {actiontryuseitem[wobjectgetopencontainer[]]}
				DoExpr {vtsetmetastate[vtgetmetastate[]]}
	IF:	SecsInStateGE 12
		DO:	SetState {Bosses}
~~ }
STATE: {CheckSummon} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	All
			Any
				Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==1}
				All
					Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==7}
					Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]>10}
		DO:	DoAll
				DoExpr {clearvar[PortalDetectOne]}
				DoExpr {clearvar[PortalDetectUse]}
				SetState {Mp}
	IF:	All
			Expr {testvar[PortalDetectOne]}
			Expr {wobjecthasdata[$PortalDetectOne{{0}}]==1}
		DO:	DoAll
				DoExpr {listpop[$PortalDetectOne,0]}
				SetState {CheckSummonTwo}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==7}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]<10}
		DO:	DoExpr {setvar[PortalDetectOne,listfilter[wobjectfindalllandscapebynamerx[`Gateway`],`wobjecthasdata[$1]==0&&coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]<10`]] &&  listcount[$PortalDetectOne] > 0 && (wobjectrequestdata[$PortalDetectOne{{0}}] || 1) && (vtsetmetastate[CheckSummon] || 1)}
~~ }
STATE: {CheckSummonTwo} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	BlockE 51190000
		DO:	DoAll
				DoExpr {setpvar[StateName,ToHoshar]}
				DoExpr {setpvar[CheckSync,ToHoshar]}
				DoExpr {clearvar[CombatStuck]}
				Chat {/vt meta load RynDQLCheck}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==7}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]<10}
		DO:	DoExpr {setvar[PortalDetectUse,listfilter[wobjectfindalllandscapebyobjectclass[14],`wobjecthasdata[$1]==1&&coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]<10`]] &&  listcount[$PortalDetectUse] > 0 && wobjectgetstringprop[$PortalDetectUse{{0}},38]#`81.6S, 36.6W` && (actiontryuseitem[$PortalDetectUse{{0}}] || 1) && (vtsetmetastate[CheckSummonTwo] || 1)}
	IF:	All
			Any
				Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==1}
				All
					Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==7}
					Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]>=10}
		DO:	DoAll
				DoExpr {clearvar[PortalDetectOne]}
				DoExpr {clearvar[PortalDetectUse]}
				SetState {Mp}
	IF:	SecsInStateGE 10
		DO:	SetState {CheckSummonTwo}
~~ }
STATE: {SkipQuest} ~~{
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF: Always
		DO: DoAll
				DoExpr {setpvar[DoQuestPurge,0]}
				DoExpr {clearpvar[Death+getpvar[Profile]]}
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]}
	IF:	All
			Expr {getpvar[DoQuestPurge]==0}
			Expr {getpvar[Death+getpvar[Profile]]==0}
			Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	DoAll
				DoExpr {setpvar[Profile,RynDQLQuestCheck]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load RynDQLQuestCheck}
~~}
STATE: {DeathRecall} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Not Expr {testvar[CombatStuck]}
		DO:	DoExpr {stopwatchstart[setvar[CombatStuck, stopwatchcreate[]]]}
	IF:	All
			Expr {testvar[CombatStuck]]}
			Expr {stopwatchelapsedseconds[getvar[CombatStuck]]>=15}
			Any
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Missile}
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Melee}
		DO:	Chat {/ub quit}
	IF:	IntoPortal
		DO:	DoExpr {clearvar[CombatStuck]}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF: Expr {getpvar[Death+getpvar[Profile]]>5}
		DO: DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]}
	IF:	BlockE 00070000
		DO:	SetState {ToTN}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[StateName,DeathRecall]}
				DoExpr {clearvar[PitStop]}
				DoExpr {clearvar[StateTimer]}
				SetOpt {NavCloseStopRange} {0.00625}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
				SetOpt {EnableCombat} {False}
				SetOpt {NavPriorityBoost} {False}
				SetOpt {EnableNav} {False}
				EmbedNav nav6 {[none]}
	IF:	Not BlockE 51190000
		DO:	DoAll
				DoExpr {actiontrycastbyid[2645]} ~~ SpellId 2645 is "Portal Recall".
				SetState {DeathRecall}
	IF:	BlockE 51190000
		DO:	DoAll
				SetOpt {EnableNav} {True}
				EmbedNav nav7 {[DeathDelay]}
	IF:	All
			NavEmpty
			BlockE 51190000
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {clearvar[CombatStuck]}
				SetOpt {EnableNav} {True}
				DoExpr {setpvar[StateName,ToStudy]}
				DoExpr {ifthen[getpvar[Leader]==1,`setpvar[Death+getpvar[Profile],getpvar[Death+getpvar[Profile]]+1]&&setpvar[StateName,getpvar[StateName]]`,`setpvar[StateName,getpvar[StateName]]`]}
				DoExpr {setpvar[CheckSync,Death]}
				Chat {/vt meta load RynDQLCheck}
~~ }
STATE: {Default} ~~ {
	IF:	All
			Expr {getpvar[Profile]==RynDQLPurgingTheCorruption}
			Expr {getpvar[StateName]!=Default}
			Not NeedToBuff
		DO:	ChatExpr {\/vt setmetastate +getpvar[StateName]}
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[Profile, RynDQLPurgingTheCorruption]}
				DoExpr {setpvar[StateName, Default]}
				DoExpr {setpvar[Stuck, ToMP]}
	IF:	Any
			Expr {getcharstringprop[1]==getpvar[LeaderName]}
			ItemCountGE 1 {Egg}
		DO:	DoExpr {setpvar[Leader,1]}
	IF:	Any
			Expr {getcharboolprop[44]==1}
			Expr {getpvar[FellowCount]<2}
		DO:	DoExpr {setpvar[AdminSkip,1]}
	IF:	Not Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter]}
		DO:	DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter,listcreate[]]}
	IF:	Not Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter]}
		DO:	DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter,listcreate[]]}
	IF:	Always
		DO:	DoAll
				Chat {/vt settings loadchar RynDQLProfile}
				Chat {/vt loot load RynDQLLootProfile.utl}
				SetOpt {EnableNav} {True}
				SetOpt {AutoCram} {False}
				SetOpt {AutoStack} {True}
				SetOpt {NavPriorityBoost} {False}
				SetOpt {EnableCombat} {False}
				SetOpt {SummonPets} {False}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
				SetOpt {NavCloseStopRange} {0.00625}
				SetOpt {EnableBuffing} {True}
				SetOpt {EnableLooting} {True}
				SetOpt {LootOnlyRareCorpses} {True}
				SetOpt {OpenDoors} {True}
				SetOpt {IdlePeaceMode} {False}
				DoExpr {clearvar[CombatStuck]}
	IF:	SecsInStateGE 180
		DO:	Chat {/ub quit}
	IF:	Any
			All
				Expr {getcharskill_buffed[32]>=391}
				Expr {getspellexpirationbyname[Aura of Incantation of Defender Self]<=1800}
			All
				Expr {getcharskill_buffed[32]<=390}
				Expr {getspellexpirationbyname[Aura of Cragstone's Will]<=1800}
		DO:	DoAll
				Chat {/vt forcebuff}
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Buffing,1]}
				DoExpr {setpvar[StateName,vtgetmetastate[]]}
				SetState {SyncBuff}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Buffing]==1}
		DO:	DoAll
				DoExpr {setpvar[StateName,vtgetmetastate[]]}
				SetState {SyncBuff}
	IF:	All
			SecsInStateGE 3
			Expr {getpvar[RouteTogglePurgingTheCorruption]==`SummonPortal`}
			Not NeedToBuff
		DO:	DoAll
				DoExpr {setpvar[StateName,ToMP]}
				SetState {ToMP}
	IF:	All
			SecsInStateGE 3
			Expr {getpvar[RouteTogglePurgingTheCorruption]==`UseBot`}
			Not NeedToBuff
		DO:	DoAll
				DoExpr {setpvar[StateName,ToTN]}
				SetState {ToTN}
	IF:	All
			SecsInStateGE 3
			Expr {getpvar[RouteTogglePurgingTheCorruption]==`Run`}
			Expr {getpvar[LSRecall]==1}
			Not NeedToBuff
		DO:	DoAll
				DoExpr {setpvar[StateName,ToLS]}
				SetState {ToLS}
~~ }
STATE: {Finished} ~~ {
	IF:	All
			SecsInStateGE 5
			Any
				Expr {testpvar[StateName]==1}
				Expr {testpvar[LegendaryKey]==1}
				Expr {testpvar[Step]==1}
				Expr {testpvar[Profile]==1}
				Expr {testpvar[Stuck]==1}
				Expr {testpvar[Death+getpvar[Profile]]==1}
				Expr {testpvar[Out]==1}
				Expr {testpvar[PTCTurnIn]==1}
				Expr {testpvar[Meta\ +getpvar[Profile]]==1}
				Expr {testpvar[Recall]==1}
				Expr {testpvar[QuestCompletedSkip]==1}
				Expr {testpvar[Return]==1}
				Expr {testpvar[TN]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+Looting]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+GoNow]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+DefaultPass]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+GoNowClear]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+Checking]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+GoNowTwo]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+PurgingTheCorruption]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+DoorOpenPTC]==1}
				Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+getcharstringprop[1]]==1}
		DO:	DoAll
				DoExpr {clearpvar[StateName]}
				DoExpr {clearpvar[LegendaryKey]}
				DoExpr {clearpvar[Step]}
				DoExpr {clearpvar[Profile]}
				DoExpr {clearpvar[Stuck]}
				DoExpr {clearpvar[Death+getpvar[Profile]]}
				DoExpr {clearpvar[BuffingStartAll]}
				DoExpr {clearpvar[Out]}
				DoExpr {clearpvar[PTCTurnIn]}
				DoExpr {clearpvar[Meta\ +getpvar[Profile]]}
				DoExpr {clearpvar[Recall]}
				DoExpr {clearpvar[QuestCompletedSkip]}
				DoExpr {clearpvar[Return]}
				DoExpr {clearpvar[TN]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+Looting]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+GoNow]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+DefaultPass]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+GoNowClear]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+Checking]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+GoNowTwo]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+PurgingTheCorruption]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+DoorOpenPTC]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+getcharstringprop[1]]}
				SetState {Finished}
	IF:	All
			Expr {testpvar[StateName]==0}
			Expr {testpvar[LegendaryKey]==0}
			Expr {testpvar[Step]==0}
			Expr {testpvar[PTCTurnIn]==0}
			Expr {testpvar[Profile]==0}
			Expr {testpvar[Stuck]==0}
			Expr {testpvar[Death+getpvar[Profile]]==0}
			Expr {testpvar[Out]==0}
			Expr {testpvar[Meta\ +getpvar[Profile]]==0}
			Expr {testpvar[Recall]==0}
			Expr {testpvar[QuestCompletedSkip]==0}
			Expr {testpvar[Return]==0}
			Expr {testpvar[TN]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+QuestComplete]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+Looting]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+GoNow]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+DefaultPass]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+GoNowClear]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+Checking]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+GoNowTwo]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+PurgingTheCorruption]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+DoorOpenPTC]==0}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+getcharstringprop[1]]==0}
		DO:	DoAll
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+GoNow]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+DefaultPass]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+GoNowClear]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+Checking]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+GoNowTwo]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+getcharstringprop[1]]}
				Chat {/vt meta load RynDQLQuestCheck}
~~ }
STATE: {GoTurnin} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	All
			Not BlockE 2B120000
			Not Expr {testvar[CombatStuck]}
		DO:	DoExpr {stopwatchstart[setvar[CombatStuck, stopwatchcreate[]]]}
	IF:	All
			Expr {testvar[CombatStuck]]}
			Expr {stopwatchelapsedseconds[getvar[CombatStuck]]>=40}
			Any
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Missile}
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Melee}
		DO:	Chat {/ub quit}
	IF:	IntoPortal
		DO:	DoExpr {clearvar[CombatStuck]}
	IF:	All
			Expr {getpvar[Recall]==0}
			Expr {getisspellknown[4214]==1} ~~ SpellId 4214 is "Return to the Keep".
			Not BlockE 2B120000
		DO:	DoAll
				DoExpr {actiontrycastbyid[4214]} ~~ SpellId 4214 is "Return to the Keep".
				SetState {GoTurnin}
	IF:	All
			Expr {getpvar[Recall]==0}
			Expr {getpvar[LSRecall]==1}
			Expr {getisspellknown[4214]==0} ~~ SpellId 4214 is "Return to the Keep".
			SecsInStateGE 5
			Not BlockE 2B120000
		DO:	DoAll
				DoExpr {actiontrycastbyid[1635]} ~~ SpellId 1635 is "Lifestone Recall".
				SetState {GoTurnin}
	IF:	Any
			CellE 2B120029
			CellE 2B120021
			CellE 2B110028
			CellE 2B110030
		DO:	DoAll
				DoExpr {setpvar[Recall,1]}
				EmbedNav nav8 {[none]}
	IF:	All
			Expr {getpvar[PTCTurnIn]==0}
			CellE 2B120039
			SecsInStateGE 7
		DO:	DoAll
				DoExpr {actiontryuseitem[wobjectfindnearestbynameandobjectclass[37,Virindi Delegate]]}
				SetState {GoTurnin}
	IF:	Any
			ChatMatch {^Virindi Delegate tells you, "Though the Curator of Torment is gone, the corruption continued to linger. Destroying the Curator's final abominations is precisely what the Council had hoped you would be able to accomplish. These things must not be left to fester."}
			ChatMatch {^Virindi Delegate tells you, "Please take these rewards. You have earned them."}
			ChatMatch {^The Virindi Delegate gazes at you and whispers softly. A chill quickly shoots up your spine.}
			ChatMatch {^Virindi Delegate tells you, "A gift from the Council for your assistance. Combine the enchantment I have bestowed onto your spirit with a mastery of the School of the Heart and you will be able to use the Curator's tools of imprisonment to improve your survival skills. It seems poetic justice to alter the Curator's magical contraptions that were intended to torment its victims into beneficial boons."}
			ChatMatch {^Virindi Delegate tells you, "Place this Virindi Cage at your home. If you possess the proper expertise the magics within it will grant you greater power."}
			ChatMatch {^Virindi Delegate tells you, "Your assistance with this matter has proven invaluable. We are most grateful for your help."}
		DO:	DoExpr {setpvar[PTCTurnIn,1]}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getpvar[PTCTurnIn]==1}
			Not Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn]}
		DO:	DoAll
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn,listcreate[]]}
				SetState {GoTurnin}
	IF:	All
			Expr {getpvar[PTCTurnIn]==1}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn]}
			Not Expr {listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getcharstringprop[1]]}
		DO:	DoAll
				DoExpr {listadd[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getcharstringprop[1]]}
				SetState {GoTurnin}
	IF:	All
			Expr {getpvar[PTCTurnIn]==1}
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn]}
			Any
				Expr {getpvar[FellowCount]==1&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]}
				Expr {getpvar[FellowCount]==2&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]}
				Expr {getpvar[FellowCount]==3&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameThree]]}
				Expr {getpvar[FellowCount]==4&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFour]]}
				Expr {getpvar[FellowCount]==5&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFive]]}
				Expr {getpvar[FellowCount]==6&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameSix]]}
				Expr {getpvar[FellowCount]==7&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameSeven]]}
				Expr {getpvar[FellowCount]==8&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameSeven]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameEight]]}
				Expr {getpvar[FellowCount]==9&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameSeven]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameEight]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+PTCTurnIn],getpvar[FellowNameNine]]}
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {clearvar[CombatStuck]}
				DoExpr {setpvar[StateName,Finished]}
				DoExpr {setpvar[CheckSync,Finished]}
				Chat {/vt meta load RynDQLCheck}
	IF:	Always
		DO:	DoAll
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
				SetOpt {EnableCombat} {False}
~~ }
STATE: {Loot} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			Any
				BlockE C8E90000
		DO:	DoAll
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]}
				SetOpt {EnableLooting} {True}
				SetOpt {NavCloseStopRange} {0.00625}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter],getcharstringprop[1]]}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter],getcharstringprop[1]]}
				DoExpr {clearvar[CorpseName]}
				DoExpr {clearvar[LootItem]}
				DoExpr {clearvar[Loot]}
				DoExpr {clearvar[CorpseDetect]}
				DoExpr {clearvar[LootCount]}
				DoExpr {clearvar[CloseCorpseTimer]}
				DoExpr {clearvar[SourceNotFound]}
				DoExpr {clearvar[LootStuckDelay]}
				DoExpr {clearvar[LootCloseCorpse]}
				DoExpr {clearvar[LootCloseCorpseTwo]}
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Looting,0]}
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Always
		DO:	DoAll
				EmbedNav nav9 {[none]}
				SetOpt {EnableLooting} {False}
	IF:	All
			NavEmpty
			Expr {getobjectinternaltype[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]==7}
			Expr {coordinatedistancewithz[getplayercoordinates[], wobjectgetphysicscoordinates[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]]>=3}
		DO:	DoAll
				DoExpr {setvar[CorpseDetect,listfilter[wobjectfindalllandscapebyobjectclass[27],`wobjectgetname[$1]#getvar[CorpseName]&&coordinatedistancewithz[getplayercoordinates[],wobjectgetphysicscoordinates[$1]]<getvar[LootRange]`]]}
				ChatExpr {\/vt addnavpt +coordinatetostring[wobjectgetphysicscoordinates[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]]}
				SetOpt {NavCloseStopRange} {0.00083333333}
				SetState {Loot}
	IF:	All
			Expr {testvar[LootCount]==1}
			Expr {getobjectinternaltype[wobjectgetopencontainer[]]==1}
			Expr {getobjectinternaltype[getvar[LootItem]]==3&&getitemcountininventorybyname[getvar[LootItem]]==getvar[LootCount]}
		DO:	DoAll
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]}
				SetOpt {EnableLooting} {True}
				SetOpt {NavCloseStopRange} {0.00625}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter],getcharstringprop[1]]}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter],getcharstringprop[1]]}
				DoExpr {clearvar[CorpseName]}
				DoExpr {clearvar[LootItem]}
				DoExpr {clearvar[Loot]}
				DoExpr {clearvar[CorpseDetect]}
				DoExpr {clearvar[LootCount]}
				DoExpr {clearvar[CloseCorpseTimer]}
				DoExpr {clearvar[SourceNotFound]}
				DoExpr {clearvar[LootStuckDelay]}
				DoExpr {clearvar[LootCloseCorpse]}
				DoExpr {clearvar[LootCloseCorpseTwo]}
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Looting,0]}
				Return
	IF:	Any
			ChatMatch {^You may complete this quest again in}
			ChatMatch {^You have solved this quest too recently!}
		DO:	DoAll
				DoExpr {setvar[LootCount,getitemcountininventorybyname[getvar[LootItem]]}
				DoExpr {setpvar[QuestCompletedSkip,1]}
				SetState {Loot}
	IF:	Expr {testvar[LootCount]==0}
		DO:	DoAll
				DoExpr {setvar[LootCount,getitemcountininventorybyname[getvar[LootItem]]+1]}
				DoExpr {stopwatchstart[setvar[LootStuckDelay, stopwatchcreate[]]]}
				SetState {Loot}
	IF:	All
			Expr {testvar[LootCount]==1}
			Any
				Expr {getobjectinternaltype[getvar[CloseCorpseTimer]]==7&&stopwatchelapsedseconds[getvar[CloseCorpseTimer]]>=5}
				Expr {getbusystate[]==0&&getvar[LootCorpseCloseTwo]==1}
			Expr {getobjectinternaltype[getvar[LootItem]]==3&&getitemcountininventorybyname[getvar[LootItem]]==getvar[LootCount]&&getobjectinternaltype[wobjectgetopencontainer[]]==7}
		DO:	DoAll
				DoExpr {setvar[CorpseDetect,listfilter[wobjectfindalllandscapebyobjectclass[27],`wobjectgetname[$1]#getvar[CorpseName]&&coordinatedistancewithz[getplayercoordinates[],wobjectgetphysicscoordinates[$1]]<getvar[LootRange]`]] && listcount[$CorpseDetect] > 0 && (actiontryuseitem[$CorpseDetect{{0}}] || 1)}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]>listcount[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter]]+4}
		DO:	DoAll
				ChatExpr {\/ub bct DailyLoop+getworldname[]+getpvar[GroupIdentifier]+`  mexec actiontryuseitem[wobjectfindnearestbyobjectclass[27]]`}
				DoExpr {setvar[CorpseDetect,listfilter[wobjectfindalllandscapebyobjectclass[27],`wobjectgetname[$1]#getvar[CorpseName]&&coordinatedistancewithz[getplayercoordinates[],wobjectgetphysicscoordinates[$1]]<getvar[LootRange]`]]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]}
	IF:	Expr {getvar[SourceNotFound]>9}
		DO:	DoAll
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]}
				DoExpr {clearvar[SourceNotFound]}
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+Looting]}
				DoExpr {actiontryuseitem[wobjectgetopencontainer[]]}
				DoExpr {setvar[CorpseDetect,listfilter[wobjectfindalllandscapebyobjectclass[27],`wobjectgetname[$1]#getvar[CorpseName]&&coordinatedistancewithz[getplayercoordinates[],wobjectgetphysicscoordinates[$1]]<getvar[LootRange]`]]}
				SetState {Loot}
	IF:	All
			Expr {getobjectinternaltype[wobjectgetopencontainer[]]==7}
			Expr {wobjectgetname[wobjectgetopencontainer[]]#getvar[CorpseName]==0}
		DO:	DoAll
				DoExpr {actiontryuseitem[wobjectgetopencontainer[]]}
				SetState {Loot}
	IF:	All
			Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Looting]==0}
			Expr {testvar[LootCount]==1}
			Expr {getvar[CloseCorpseTimer]==0}
			Expr {getobjectinternaltype[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]==7}
			Expr {coordinatedistancewithz[getplayercoordinates[], wobjectgetphysicscoordinates[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]]<3}
			Expr {getobjectinternaltype[getvar[LootItem]]==3&&getitemcountininventorybyname[getvar[LootItem]]<getvar[LootCount]}
			SecsInStateGE 4
		DO:	DoAll
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+LootFail,getgvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]+1]}
				DoExpr {setvar[CorpseDetect,listfilter[wobjectfindalllandscapebyobjectclass[27],`wobjectgetname[$1]#getvar[CorpseName]&&coordinatedistancewithz[getplayercoordinates[],wobjectgetphysicscoordinates[$1]]<getvar[LootRange]`]]}
				SetState {Loot}
	IF:	All
			Expr {testvar[LootCount]==1}
			Expr {getobjectinternaltype[getvar[LootItem]]==3&&getitemcountininventorybyname[getvar[LootItem]]<getvar[LootCount]}
			Expr {getobjectinternaltype[wobjectgetopencontainer[]]==7}
			Expr {wobjectgetname[wobjectgetopencontainer[]]#getvar[CorpseName]}
		DO:	DoAll
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Looting,1]}
				DoExpr {stopwatchstart[setvar[LootCloseCorpse, stopwatchcreate[]]]}
	IF:	All
			Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Looting]==1}
			Expr {getbusystate[]==5}
		DO:	DoExpr {setvar[LootCorpseCloseTwo,1]}
	IF:	All
			All
				Expr {getobjectinternaltype[getvar[LootCloseCorpse]]==7}
				Expr {stopwatchelapsedseconds[getvar[LootCloseCorpse]]>=2}
			Expr {testvar[LootCount]==1}
			Expr {getobjectinternaltype[getvar[LootItem]]==3&&getitemcountininventorybyname[getvar[LootItem]]<getvar[LootCount]}
			Expr {getobjectinternaltype[wobjectgetopencontainer[]]==7}
			Expr {wobjectgetname[wobjectgetopencontainer[]]#getvar[CorpseName]}
		DO:	DoAll
				DoExpr {setvar[SourceNotFound,getvar[SourceNotFound]+1]}
				DoExpr {setvar[Loot,listfilter[wobjectfindallbycontainer[wobjectgetopencontainer[]], `wobjectgetname[$1]#getvar[LootItem]`]] && listcount[$Loot] > 0 && (actiontryuseitem[$Loot{{0}}] || 1) && (vtsetmetastate[Loot] || 1)}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]==7}
			Expr {coordinatedistancewithz[getplayercoordinates[], wobjectgetphysicscoordinates[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]]<3}
			Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Looting]==0&&getvar[LootCount]>0}
			Expr {getitemcountininventorybyname[getvar[LootItem]]<getvar[LootCount]&&getobjectinternaltype[wobjectgetopencontainer[]]==1}
		DO:	DoExpr {setvar[CorpseDetect,listfilter[wobjectfindalllandscapebyobjectclass[27],`wobjectgetname[$1]#getvar[CorpseName]&&coordinatedistancewithz[getplayercoordinates[],wobjectgetphysicscoordinates[$1]]<getvar[LootRange]`]] && listcount[$CorpseDetect] > 0 && (actiontryuseitem[$CorpseDetect{{0}}] || 1)}
	IF:	All
			Expr {testvar[LootCount]==1}
			Expr {getvar[CloseCorpseTimer]==0}
			Expr {getobjectinternaltype[getvar[LootItem]]==3&&getitemcountininventorybyname[getvar[LootItem]]==getvar[LootCount]}
		DO:	DoExpr {stopwatchstart[setvar[CloseCorpseTimer, stopwatchcreate[]]]}
	IF:	Any
			All
				Expr {getobjectinternaltype[getvar[LootStuckDelay]]==7}
				Expr {stopwatchelapsedseconds[getvar[LootStuckDelay]]>=180}
			All
				All
					Expr {getobjectinternaltype[getvar[LootStuckDelay]]==7}
					Expr {stopwatchelapsedseconds[getvar[LootStuckDelay]]>=20}
				Expr {getitemcountininventorybyname[getvar[LootItem]]<getvar[LootCount]}
				Expr {listcount[$CorpseDetect]==0}
			All
				Expr {getobjectinternaltype[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]==7}
				Expr {coordinatedistancewithz[getplayercoordinates[], wobjectgetphysicscoordinates[wobjectfindnearestbynameandobjectclass[27,`^`+getvar[CorpseName]+`.*`]]]<3}
				All
					Expr {getobjectinternaltype[getvar[LootCloseCorpse]]==7}
					Expr {stopwatchelapsedseconds[getvar[LootCloseCorpse]]>=10}
				Expr {getitemcountininventorybyname[getvar[LootItem]]<getvar[LootCount]}
				Expr {getobjectinternaltype[wobjectgetopencontainer[]]==7&&listcount[$Loot]==0}
				Expr {wobjectgetname[wobjectgetopencontainer[]]#getvar[CorpseName]}
		DO:	DoAll
				DoExpr {clearvar[LootStuckDelay]}
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Looting,0]}
				SetState {LootStuckDelay}
	IF:	All
			Expr {listcount[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter]]==listcount[getgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter]]}
			SecsInStateGE 30
		DO:	DoAll
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Looting,0]}
				SetState {Loot}
~~ }
STATE: {LootStuckDelay} ~~ {
	IF:	All
			Expr {getobjectinternaltype[wobjectgetopencontainer[]]==1}
			Expr {getitemcountininventorybyname[getvar[LootItem]]==getvar[LootCount]}
		DO:	DoAll
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]}
				SetOpt {EnableLooting} {True}
				SetOpt {NavCloseStopRange} {0.00625}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter],getcharstringprop[1]]}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter],getcharstringprop[1]]}
				DoExpr {clearvar[CorpseName]}
				DoExpr {clearvar[LootItem]}
				DoExpr {clearvar[Loot]}
				DoExpr {clearvar[CorpseDetect]}
				DoExpr {clearvar[LootCount]}
				DoExpr {clearvar[CloseCorpseTimer]}
				DoExpr {clearvar[SourceNotFound]}
				DoExpr {clearvar[LootStuckDelay]}
				DoExpr {clearvar[LootCloseCorpse]}
				DoExpr {clearvar[LootCloseCorpseTwo]}
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Looting,0]}
				Return
	IF:	All
			Expr {getobjectinternaltype[wobjectgetopencontainer[]]==1}
			SecsInStateGE 15
		DO:	DoAll
				DoExpr {setvar[LootStuckDelayInternalCounter,getvar[LootStuckDelayInternalCounter]+1]}
				DoExpr {setvar[CorpseDetect,listfilter[wobjectfindalllandscapebyobjectclass[27],`wobjectgetname[$1]#getvar[CorpseName]&&coordinatedistancewithz[getplayercoordinates[],wobjectgetphysicscoordinates[$1]]<getvar[LootRange]`]] && (vtsetmetastate[LootStuckDelay] || 1)}
	IF:	All
			SecsInStateGE 2
			Expr {getobjectinternaltype[wobjectgetopencontainer[]]==7}
		DO:	DoAll
				ChatExpr {\/ub bct DailyLoop+getworldname[]+getpvar[GroupIdentifier]+\ \/vt opt set EnableCombat False}
				DoExpr {actiontryuseitem[wobjectgetopencontainer[]]}
				SetState {LootStuckDelay}
	IF:	Any
			Expr {getvar[LootStuckDelayInternalCounter]>19}
			Expr {listcount[$CorpseDetect]==0}
		DO:	DoAll
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+LootFail]}
				SetOpt {EnableLooting} {True}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter],getcharstringprop[1]]}
				DoExpr {listremove[getgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter],getcharstringprop[1]]}
				DoExpr {clearvar[CorpseName]}
				DoExpr {clearvar[LootItem]}
				DoExpr {clearvar[Loot]}
				DoExpr {clearvar[CorpseDetect]}
				DoExpr {clearvar[LootCount]}
				DoExpr {clearvar[CloseCorpseTimer]}
				DoExpr {clearvar[SourceNotFound]}
				DoExpr {clearvar[LootStuckDelay]}
				DoExpr {clearvar[LootCloseCorpseTwo]}
				DoExpr {clearvar[LootStuckDelayInternalCounter]}
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Looting,0]}
				ChatExpr {\/ub bct DailyLoop+getworldname[]+getpvar[GroupIdentifier]+\ \/vt opt set EnableCombat True}
				DoExpr {vtsetmetastate[getvar[LootReturn]]}
~~ }
STATE: {Mp} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Always
		DO:	DoExpr {setpvar[Stuck,ToMP]}
	IF:	Any
			CellE 482E0131
			CellE 49F50100
			BlockE 1C4D0000
			BlockE 11330000
			BlockE 11330000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {ToMP}
	IF:	CellE 016C01BC
		DO:	EmbedNav nav10 {[none]}
	IF:	All
			NavEmpty
			Expr {getcharstringprop[1]==getpvar[PurgingTheCorruptionSummon]}
			Any
				CellE 016C0171
				CellE 016C0155
				CellE 016C0170
				CellE 016C0146
				CellE 016C0147
		DO:	DoAll
				DoExpr {setpvar[StateName,Summon]}
				DoExpr {setpvar[CheckSync,Summon]}
				Chat {/vt meta load RynDQLCheck}
	IF:	All
			NavEmpty
			Expr {getcharstringprop[1]!=getpvar[PurgingTheCorruptionSummon]}
			Any
				CellE 016C0171
				CellE 016C0155
				CellE 016C0170
				CellE 016C0146
				CellE 016C0147
		DO:	DoAll
				DoExpr {setpvar[StateName,SummonW]}
				DoExpr {setpvar[CheckSync,Summon]}
				Chat {/vt meta load RynDQLCheck}
~~ }
STATE: {ServitorDoor} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetOpt {DoorLockpickDiffExcessThreshold} {999}
	IF:	Any
			CellE 58700168
			CellE 5870017A
			CellE 58700167
			CellE 58700178
			CellE 58700179
			CellE 5870018B
			CellE 5870018A
		DO:	EmbedNav nav11 {junk.nav}
	IF:	All
			CellE 58700158
			Expr {getobjectinternaltype[wobjectfindininventorybyname[Private Chamber Key]]==7}
			Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
			Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==0}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<10}
			Expr {getpvar[Leader]==1}
		DO:	DoAll
				DoExpr {setvar[Open,1]}
				SetOpt {EnableNav} {False}
				DoExpr {actiontryapplyitem[wobjectfindininventorybyname[Private Chamber Key],wobjectfindnearestdoor[]]}
				SetState {ServitorDoor}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getvar[Open]==1}
			Any
				Expr {getobjectinternaltype[wobjectfindininventorybyname[Private Chamber Key]]==1}
				ChatMatch {^The Private Chamber has been unlocked.}
				ChatMatch {^Your key is used up.}
		DO:	DoAll
				SetOpt {EnableNav} {True}
				DoExpr {setvar[Open,0]}
				DoExpr {actiontryuseitem[wobjectfindnearestdoor[]]}
				SetState {ServitorDoor}
	IF:	All
			Any
				CellE 58700158
				CellE 58700149
			Any
				Expr {getpvar[DoorOpenPTC]==1}
				All
					Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
					Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==1}
					Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<10}
		DO:	DoAll
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+DoorOpenPTC,1]}
				EmbedNav nav12 {[none]}
	IF:	All
			Any
				CellE 58700158
				CellE 58700149
			Any
				Expr {getpvar[DoorOpenPTC]==1}
				All
					Expr {getobjectinternaltype[wobjectfindnearestdoor[]]==7}
					Expr {wobjectgetisdooropen[wobjectfindnearestdoor[]]==1}
					Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestdoor[]],getplayercoordinates[]]<10}
			Expr {getvar[JumpStuck]==0}
		DO:	DoExpr {stopwatchstart[setvar[JumpStuck, stopwatchcreate[]]]}
	IF:	All
			Any
				CellE 58700158
				CellE 58700149
			Expr {testvar[JumpStuck]}
			Expr {stopwatchelapsedseconds[getvar[JumpStuck]]>=5}
		DO:	EmbedNav nav13 {junk.nav}
	IF:	All
			Any
				CellE 58700158
				CellE 58700149
			Expr {testvar[JumpStuck]}
			Expr {stopwatchelapsedseconds[getvar[JumpStuck]]>=8}
		DO:	DoAll
				DoExpr {stopwatchstart[setvar[JumpStuck, stopwatchcreate[]]]}
				SetState {ServitorDoor}
	IF:	CellE 5870013C
		DO:	DoExpr {clearvar[JumpStuck]}
	IF:	CellE 5870010C
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,Bosses]}
				DoExpr {setpvar[CheckSync,Bosses]}
				Chat {/vt meta load RynDQLCheck}
	IF:	CellE 58700100
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
~~ }
STATE: {Summon} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Not Expr {testvar[CombatStuck]}
		DO:	DoExpr {stopwatchstart[setvar[CombatStuck, stopwatchcreate[]]]}
	IF:	All
			Expr {testvar[CombatStuck]]}
			Expr {stopwatchelapsedseconds[getvar[CombatStuck]]>=40}
			Any
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Missile}
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Melee}
		DO:	Chat {/ub quit}
	IF:	IntoPortal
		DO:	DoExpr {clearvar[CombatStuck]}
	IF:	Never
		DO:	Chat {%%% Tumerok Compound Surface %%%}
	IF:	All
			Expr {getisspellknown[2709]==1} ~~ SpellId 2709 is "Summon Primary Portal I".
			SecsInStateGE 2
		DO:	DoExpr {actiontrycastbyid[2709]} ~~ SpellId 2709 is "Summon Primary Portal I".
	IF:	All
			Expr {getisspellknown[1637]==1} ~~ SpellId 1637 is "Summon Primary Portal III".
			SecsInStateGE 2
		DO:	DoExpr {actiontrycastbyid[1637]} ~~ SpellId 1637 is "Summon Primary Portal III".
	IF:	All
			Expr {getisspellknown[158]==1} ~~ SpellId 158 is "Summon Primary Portal II".
			SecsInStateGE 2
		DO:	DoExpr {actiontrycastbyid[158]} ~~ SpellId 158 is "Summon Primary Portal II".
	IF:	All
			Expr {getisspellknown[157]==1} ~~ SpellId 157 is "Summon Primary Portal I".
			SecsInStateGE 2
		DO:	DoExpr {actiontrycastbyid[157]} ~~ SpellId 157 is "Summon Primary Portal I".
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==7}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]<10}
			SecsInStateGE 1
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbyobjectclass[14]]}
	IF:	SecsInStateGE 15
		DO:	SetState {Summon}
	IF:	CellE 5119002C
		DO:	SetState {ToStudy}
~~ }
STATE: {SummonW} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	All
			Expr {getobjectinternaltype[wobjectfindnearestbyobjectclass[14]]==7}
			Expr {coordinatedistancewithz[wobjectgetphysicscoordinates[wobjectfindnearestbyobjectclass[14]],getplayercoordinates[]]<10}
			SecsInStateGE 1
		DO:	DoExpr {actiontryuseitem[wobjectfindnearestbyobjectclass[14]]}
	IF:	SecsInStateGE 7
		DO:	SetState {SummonW}
	IF:	CellE 5119002C
		DO:	SetState {ToStudy}
~~ }
STATE: {SyncBuff} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestGrael,1]" /></control></view>}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO: SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestGrael]==1}
		DO: SetState {SkipQuest}
	IF:	All
			Not Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]}
			SecsInStateGE 240
		DO:	DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]}
	IF:	Not Expr {testpvar[BuffingStartAll]}
		DO:	DoAll
				DoExpr {setpvar[BuffingStartAll,1]}
				Chat {/vt forcebuff}
	IF:	All
			NeedToBuff
			Expr {vtgetsetting[EnableBuffing]!=True}
		DO:	SetOpt {EnableBuffing} {True}
	IF:	All
			Not Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete]}
			Not NeedToBuff
		DO:	DoAll
				DoExpr {setgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete,listcreate[]]}
				SetState {SyncBuff}
	IF:	All
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete]}
			Not Expr {listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getcharstringprop[1]]}
			Not NeedToBuff
		DO:	DoAll
				DoExpr {listadd[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getcharstringprop[1]]}
				SetState {SyncBuff}
	IF:	All
			Not NeedToBuff
			Expr {testgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete]}
			Any
				Expr {getpvar[FellowCount]==1&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]}
				Expr {getpvar[FellowCount]==2&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]}
				Expr {getpvar[FellowCount]==3&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameThree]]}
				Expr {getpvar[FellowCount]==4&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFour]]}
				Expr {getpvar[FellowCount]==5&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFive]]}
				Expr {getpvar[FellowCount]==6&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameSix]]}
				Expr {getpvar[FellowCount]==7&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameSeven]]}
				Expr {getpvar[FellowCount]==8&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameEight]]}
				Expr {getpvar[FellowCount]==9&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[LeaderName]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameTwo]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameThree]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFour]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameFive]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameSix]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameSeven]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameEight]]&&listcontains[getgvar[getworldname[]+getpvar[GroupIdentifier]+SyncBuffComplete],getpvar[FellowNameNine]]}
		DO:	DoAll
				DoExpr {cleargvar[getworldname[]+getpvar[GroupIdentifier]+Buffing]}
				DoExpr {setpvar[StateName,Default]}
				DoExpr {vtsetmetastate[getpvar[StateName]]}
~~ }
STATE: {ToBookcaseOne} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	Expr {getpvar[FellowCount]<2}
		DO:	SetOpt {EnableCombat} {False}
	IF:	Expr {getpvar[FellowCount]>=2}
		DO:	SetOpt {EnableCombat} {True}
	IF:	CellE 587002FA
		DO:	EmbedNav nav14 {junk.nav}
	IF:	All
			NavEmpty
			Any
				CellE 58700314
				CellE 58700313
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,BookcaseOne]}
				DoExpr {setpvar[CheckSync,BookcaseOne]}
				Chat {/vt meta load RynDQLCheck}
~~ }
STATE: {ToBookcaseTwo} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	All
			Expr {getpvar[Leader]==1}
			CellE 587001CE
		DO:	SetOpt {Recharge-Helper-HitP} {0}
	IF:	CellE 587001AE
		DO:	SetOpt {EnableCombat} {False}
	IF:	Any
			CellE 587001EC
			CellE 587001F4
			CellE 587001F3
			CellE 587001EB
			CellE 587001DF
			CellE 587001E0
			CellE 587001E1
			CellE 587001ED
			CellE 587001F5
		DO:	EmbedNav nav15 {junk.nav}
	IF:	All
			NavEmpty
			Any
				CellE 587001AE
				CellE 587001AD
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,BookcaseTwo]}
				DoExpr {setpvar[CheckSync,BookcaseTwo]}
				Chat {/vt meta load RynDQLCheck}
~~ }
STATE: {ToLightningRoom} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	Expr {getpvar[Leader]==1}
		DO:	SetOpt {Recharge-Helper-HitP} {75}
	IF:	CellE 587001AB
		DO:	EmbedNav nav16 {junk.nav}
	IF:	All
			CellE 58700174
			NavEmpty
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToServitor]}
				DoExpr {setpvar[CheckSync,ToServitor]}
				Chat {/vt meta load RynDQLCheck}
~~ }
STATE: {ToLS} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Not Expr {testvar[CombatStuck]}
		DO:	DoExpr {stopwatchstart[setvar[CombatStuck, stopwatchcreate[]]]}
	IF:	All
			Expr {testvar[CombatStuck]]}
			Expr {stopwatchelapsedseconds[getvar[CombatStuck]]>=40}
			Any
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Missile}
				Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Melee}
		DO:	Chat {/ub quit}
	IF:	IntoPortal
		DO:	DoExpr {clearvar[CombatStuck]}
	IF:	BlockE 2B120000
		DO:	DoExpr {setpvar[Recall,1]}
	IF:	All
			SecsInStateGE 3
			Expr {getpvar[Recall]==0}
			Expr {getisspellknown[4214]==1} ~~ SpellId 4214 is "Return to the Keep".
			Not BlockE 2B120000
		DO:	DoAll
				DoExpr {actiontrycastbyid[4214]} ~~ SpellId 4214 is "Return to the Keep".
				SetState {ToLS}
	IF:	All
			SecsInStateGE 3
			Expr {getpvar[Recall]==0}
			Expr {getisspellknown[4214]==0} ~~ SpellId 4214 is "Return to the Keep".
			Not BlockE 2B120000
		DO:	DoAll
				DoExpr {actiontrycastbyid[1635]} ~~ SpellId 1635 is "Lifestone Recall".
				SetState {ToLS}
	IF:	All
			Expr {getpvar[Step]==0}
			BlockE 2B120000
		DO:	DoAll
				DoExpr {clearvar[CombatStuck]}
				SetState {ToTumerok}
				DoExpr {setpvar[Recall,0]}
	IF:	All
			Expr {getpvar[Step]==1}
			BlockE 2B120000
		DO:	DoAll
				DoExpr {clearvar[CombatStuck]}
				SetState {GoTurnin}
				DoExpr {setpvar[Recall,0]}
~~ }
STATE: {ToMP} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Not BlockE 016C0000
		DO:	Chat {/mp}
	IF:	BlockE 016C0000
		DO:	SetState {Mp}
	IF:	SecsInStateGE 15
		DO:	SetState {ToMP}
~~ }
STATE: {ToPit} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	CellE 58700311
		DO:	EmbedNav nav17 {[none]}
	IF:	Any
			CellE 587001EC
			CellE 587001ED
			CellE 587001EB
			CellE 587001E0
			CellE 587001E1
			CellE 587001F5
			CellE 587001F4
			CellE 587001F3
			CellE 587001DF
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ToBookcaseTwo]}
				DoExpr {setpvar[CheckSync,ToBookcaseTwo]}
				Chat {/vt meta load RynDQLCheck}
~~ }
STATE: {ToServitor} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=420}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	CellE 58700174
		DO:	EmbedNav nav18 {junk.nav}
	IF:	All
			NavEmpty
			Expr {getobjectinternaltype[wobjectfindininventorybyname[Private Chamber Key]]==7}
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ServitorDoor]}
				DoExpr {setpvar[CheckSync,ServitorDoor]}
				Chat {/vt meta load RynDQLCheck}
	IF:	All
			Expr {getpvar[FellowCount]>=2}
			CellE 58700168
			NavEmpty
		DO:	SetOpt {EnableCombat} {True}
	IF:	All
			Expr {getpvar[Leader]==0}
			CellE 58700168
			NavEmpty
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {setpvar[StateName,ServitorDoor]}
				DoExpr {setpvar[CheckSync,ServitorDoor]}
				Chat {/vt meta load RynDQLCheck}
	IF:	All
			Expr {getpvar[Leader]==1}
			Expr {getobjectinternaltype[wobjectfindnearestbynameandobjectclass[27,Corpse of Hollow Servitor]]==7}
			Expr {getobjectinternaltype[wobjectfindininventorybyname[Private Chamber Key]]==1}
			NoMobsInDist 15
			CellE 58700168
			NavEmpty
		DO:	DoAll
				DoExpr {setvar[CorpseName,Corpse of Hollow Servitor]]}
				DoExpr {setvar[LootItem,Private Chamber Key]}
				DoExpr {setvar[LootRange,25]}
				DoExpr {listadd[getgvar[getworldname[]+getpvar[GroupIdentifier]+FailDelayCounter],getcharstringprop[1]]}
				DoExpr {listadd[getgvar[getworldname[]+getpvar[GroupIdentifier]+LootingCounter],getcharstringprop[1]]}
				DoExpr {setvar[LootReturn,ToServitor]}
				CallState {Loot} {ToServitor}
	IF:	Always
		DO:	DoExpr {setpvar[LegendaryKey,getitemcountininventorybyname[Legendary Key]+1]}
~~ }
STATE: {ToStudy} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			Death
			ChatMatch {^Your fellow .* has died!$}
			ChatMatch {!ManDown}
			ChatMatch {^.*().* (think|say|says|tells you), \"!ManDown\"$}
			All
				Expr {testvar[StateTimer]}
				Expr {stopwatchelapsedseconds[getvar[StateTimer]]>=600}
			Any
				BlockE C8E90000
		DO:	DoAll
				Chat {/f !ManDown}
				SetState {DeathRecall}
	IF:	Not Expr {testvar[StateTimer]}
		DO:	DoExpr {stopwatchstart[setvar[StateTimer, stopwatchcreate[]]]}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[Stuck, DeathRecall]}
				DoExpr {setpvar[StateName,vtgetmetastate[]]}
	IF:	BlockE 51190000
		DO:	DoAll
				SetOpt {EnableCombat} {False}
				EmbedNav nav19 {[none]}
	IF:	CellE 587002FA
		DO:	EmbedNav nav20 {Clear}
	IF:	All
			NavEmpty
			CellE 587002FA
		DO:	DoAll
				DoExpr {clearvar[StateTimer]}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0625]]`]}
				DoExpr {setpvar[StateName,ToBookcaseOne]}
				DoExpr {setpvar[CheckSync,ToBookcaseOne]}
				Chat {/vt meta load RynDQLCheck}
				SetOpt {EnableCombat} {True}
~~ }
STATE: {ToTN} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Not Expr {testvar[CombatStuck]}
		DO:	DoExpr {stopwatchstart[setvar[CombatStuck, stopwatchcreate[]]]}
	IF:	Any
			All
				SecsInStateGE 10
				BlockE F6820000
				Expr {getvar[Recall]==1}
				Not Expr {wobjectfindnearestbynameandobjectclass[14,Portal to Town Network]}
			All
				Expr {testvar[CombatStuck]]}
				Expr {stopwatchelapsedseconds[getvar[CombatStuck]]>=40}
				Any
					Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Missile}
					Expr {getequippedweapontype[]==Wand&&getcombatstate[]==Melee}
		DO:	Chat {/ub quit}
	IF:	IntoPortal
		DO:	DoExpr {clearvar[CombatStuck]}
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[Stuck, ToTN]}
				DoExpr {ifthen[getcharskill_traininglevel[41]==3||getcharskill_traininglevel[44]==3||getcharskill_traininglevel[45]==3||getcharskill_traininglevel[46]==3,`vtsetsetting[AttackDistance,cstr[0.0125]]`,`vtsetsetting[AttackDistance,cstr[0.0208]]`]}
				SetOpt {EnableCombat} {False}
	IF:	BlockE F6820000
		DO:	DoAll
				DoExpr {setvar[Recall,1]}
				EmbedNav nav21 {[none]}
	IF:	All
			Expr {getvar[Recall]==0}
			Not BlockE F6820000
		DO:	DoAll
				DoExpr {actiontrycastbyid[2931]} ~~ SpellId 2931 is "Recall Aphus Lassel".
				SetState {ToTN}
	IF:	All
			Expr {getpvar[RouteTogglePurgingTheCorruption]==`UseBot`}
			CellE 00070145
		DO:	DoAll
				DoExpr {setpvar[ReturnMetaProfile,RynDQLPurgingTheCorruption]]}
				Chat {/vt meta load RynDQLUseBot}
				DoExpr {clearvar[CombatStuck]}
				DoExpr {clearvar[Recall]}
~~ }
STATE: {ToTumerok} ~~ {
	IF:	All
			ChatMatch {^.*().* (tells you), \"![Ww]hat[Qq]uest\"$}
			ChatCapture {^\<Tell\:IIDString\:[^\:]*\:[^\>]*>(?<tellquest>[^\<]*)\<\\Tell\> (say|says|tells you), \"(?<telltext>.*)\"$} {}
		DO:	DoAll
				ChatExpr {\/t +getvar[capturegroup_tellquest]+\,Meta +getpvar[Profile]+\ on State +getpvar[StateName]}
				DoExpr {clearvar[capturegroup_tellquest]}
	IF:	Not Expr {uiviewexists[STUCK]}
		DO:	CreateView {STUCK} {<?xml version="1.0"?><view width="150" height="101" title="Stuck"><control type="layout"><control type="button" name="Stuck" left="0" top="0" width="149" height="49" text="Stuck" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck,1]" /><control type="button" name="Skip" left="0" top="50" width="149" height="49" text="Skip" actionexpr="setgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC,1]" /></control></view>}
	IF:	Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+Zstuck]==1}
		DO:	SetState {Zstuck}
	IF: Expr {getgvar[getworldname[]+getpvar[GroupIdentifier]+SkipQuestPTC]==1}
		DO: SetState {SkipQuest}
	IF:	Any
			CellE 2B120021
			CellE 2B120029
		DO:	EmbedNav nav22 {Junk.nav}
	IF:	CellE 5416001A
		DO:	EmbedNav nav23 {Junk.nav}
	IF:	CellE 01BC011D
		DO:	DoAll
				EmbedNav nav24 {Junk.nav}
				DoExpr {setpvar[Out,1]}
	IF:	All
			Expr {getpvar[Out]==1}
			CellE 5119002C
		DO:	EmbedNav nav25 {Junk.nav}
	IF:	All
			CellE 5119002C
			NavEmpty
		DO:	DoAll
				SetOpt {EnableCombat} {True}
				DoExpr {setpvar[StateName,ToStudy]}
				DoExpr {setpvar[CheckSync,ToStudy]}
				Chat {/vt meta load RynDQLCheck}
	IF:	All
			SecsInStateGE 30
			CellE 01BC011D
		DO:	SetState {ToTumerok}
~~ }
STATE: {Zstuck} ~~ {
	IF:	Always
		DO:	DoAll
				DoExpr {setpvar[Profile,RynDQLQuestCheck]}
				DoExpr {setpvar[StateName,Default]}
				Chat {/vt meta load RynDQLQuestCheck}
~~ }

~~========================= ONLY NAVS APPEAR BELOW THIS LINE =========================~~

NAV: nav0 once ~~ {
	pnt -30.5495443979899 -12.4826324383418 2.08333134651184E-05
	chk -30.5495443979899 -12.4826324383418 2.08333134651184E-05
	pnt -30.5495000839233 -12.432722345988 2.08333134651184E-05
~~ }
NAV: nav1 once ~~ {
	pnt -30.5503756205241 -12.484718243281 -0.0499791701634725
	chk -30.5503756205241 -12.484718243281 -0.0499791701634725
	pnt -30.5482906977336 -12.4323438882828 -0.0499791701634725
~~ }
NAV: nav2 circular ~~ {
~~ }
NAV: nav3 once ~~ {
	pnt -31.4933871030808 -12.5808713118235 -0.0499791701634725
~~ }
NAV: nav4 once ~~ {
	pnt -31.4933871030808 -12.5808713118235 -0.0499791701634725
~~ }
NAV: nav5 once ~~ {
	pnt -31.4933871030808 -12.5808713118235 -0.0499791701634725
~~ }
NAV: nav6 circular ~~ {
~~ }
NAV: nav7 once ~~ {
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
	pau 96.5192172686259 -77.3924765904744 -0.406645806630452 9000
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
~~ }
NAV: nav8 once ~~ {
	pnt -67.0473333358765 -87.5435416668654 0.200020837783813
	pnt -67.0056301116943 -87.4893428484599 0.200020837783813
	pnt -66.9585248311361 -87.4345709005992 0.200020837783813
	pnt -66.9247292836507 -87.4404919544856 0.200020837783813
	pnt -66.7981722513835 -87.4676710049311 0.200020837783813
	pnt -66.7949290593465 -87.4684552272161 0.200020837783813
~~ }
NAV: nav9 once ~~ {
~~ }
NAV: nav10 once ~~ {
	pnt -100.939974832535 -15.6801240205765 2.08333134651184E-05
	pnt -100.939348475138 -15.714978090922 2.08333134651184E-05
	pnt -100.94149128596 -15.7629050890605 2.08333134651184E-05
	pnt -100.965297698975 -15.7578423817952 2.08333134651184E-05
	pnt -101.010728359222 -15.7601078351339 2.08333134651184E-05
	pnt -101.045526981354 -15.7627742767334 2.08333134651184E-05
	pnt -101.068792374929 -15.7641580899556 2.08333134651184E-05
	pnt -101.08689609766 -15.7793096542358 2.08333134651184E-05
	pnt -101.086590993404 -15.7951472123464 2.08333134651184E-05
~~ }
NAV: nav11 once ~~ {
	pnt -30.7326331456502 -12.766535282135 -0.0499791701634725
	chk -30.7326331456502 -12.766535282135 -0.0499791701634725
	pnt -30.7455450057983 -12.7663492838542 -0.0499791701634725
	chk -30.7455450057983 -12.7663492838542 -0.0499791701634725
	pnt -30.7753998438517 -12.7659066200256 -0.0499791701634725
~~ }
NAV: nav12 once ~~ {
	pnt -30.8296220143636 -12.7660331090291 -0.0499791701634725
	pnt -30.8840847651164 -12.7653674443563 -0.0499791701634725
~~ }
NAV: nav13 once ~~ {
	jmp -30.8821659088135 -12.7649225234985 -0.0499791701634725 270 {False} 250.00003
	pau -30.8821659088135 -12.7649225234985 -0.0499791701634725 5000
	pnt -30.8296220143636 -12.7660331090291 -0.0499791701634725
	pnt -30.8378318786621 -12.7651419003805 -0.0499791701634725
	chk -30.8378318786621 -12.7651419003805 -0.0499791701634725
	pnt -30.8821659088135 -12.7649225234985 -0.0499791701634725
	pau -30.8821659088135 -12.7649225234985 -0.0499791701634725 2000
	ptl -30.8821659088135 -12.7649225234985 -0.0499791701634725 -30.8984666824341 -12.7666666666667 -0.0502624996006489 14 {Portal}
	pau -30.8821659088135 -12.7649225234985 -0.0499791701634725 7000
~~ }
NAV: nav14 once ~~ {
	pnt -30.6339256922404 -12.7085862795512 2.08333134651184E-05
	chk -30.6339256922404 -12.7085862795512 2.08333134651184E-05
	pnt -30.6335298538208 -12.6959900856018 2.08333134651184E-05
	chk -30.6335298538208 -12.6959900856018 2.08333134651184E-05
	pnt -30.6337446848551 -12.6806244532267 2.08333134651184E-05
	chk -30.6337446848551 -12.6806244532267 2.08333134651184E-05
	pnt -30.5918938318888 -12.6849890708923 2.08333134651184E-05
	chk -30.5918938318888 -12.6849890708923 2.08333134651184E-05
	pnt -30.5943080266317 -12.5994916280111 2.08333134651184E-05
	pnt -30.5079613367716 -12.6004034042358 2.08333134651184E-05
	pnt -30.5073486963908 -12.5850484689077 2.08333134651184E-05
	chk -30.5073486963908 -12.5850484689077 2.08333134651184E-05
	pnt -30.5068689346313 -12.573024225235 2.08333134651184E-05
	chk -30.5068689346313 -12.573024225235 2.08333134651184E-05
	pnt -30.550737508138 -12.5423197746277 2.08333134651184E-05
	pnt -30.5495836257935 -12.4974440097809 2.08333134651184E-05
~~ }
NAV: nav15 once ~~ {
	pnt -30.3833031972249 -12.5295726458232 -0.0499791701634725
	chk -30.3833031972249 -12.5295726458232 -0.0499791701634725
	pnt -30.3833418528239 -12.5449691613515 -0.0499791701634725
	chk -30.3833418528239 -12.5449691613515 -0.0499791701634725
	pnt -30.3824700673421 -12.5997194290161 -0.0499791701634725
	chk -30.3824700673421 -12.5997194290161 -0.0499791701634725
	pnt -30.400048828125 -12.600323120753 -0.0499791701634725
	chk -30.400048828125 -12.600323120753 -0.0499791701634725
	pnt -30.4834192276001 -12.5991220474243 -0.0499791701634725
	chk -30.4834192276001 -12.5991220474243 -0.0499791701634725
	pnt -30.4926698684692 -12.5994397322337 -0.0499791701634725
	chk -30.4926698684692 -12.5994397322337 -0.0499791701634725
	pnt -30.549455388387 -12.5755200227102 -0.0499791701634725
	pnt -30.5498397191366 -12.4976597468058 -0.0499791701634725
~~ }
NAV: nav16 once ~~ {
	pnt -30.5340152104696 -12.4321009715398 -0.0499791701634725
	pnt -30.4665270487467 -12.4337197224299 -0.0499791701634725
	pnt -30.466305287679 -12.3760842323303 -0.0499791701634725
	chk -30.466305287679 -12.3760842323303 -0.0499791701634725
	pnt -30.4659015655518 -12.3607223957777 -0.0499791701634725
	chk -30.4659015655518 -12.3607223957777 -0.0499791701634725
	pnt -30.4977362950643 -12.3484936658293 -0.0499791701634725
	pnt -30.5384187698364 -12.3475584112108 -0.0499791701634725
	pnt -30.5503524144491 -12.3661059945822 -0.0499791701634725
	chk -30.5503524144491 -12.3661059945822 -0.0499791701634725
	pnt -30.5487510045369 -12.3936488350232 -0.0499791701634725
	chk -30.5487510045369 -12.3936488350232 -0.0499791701634725
	pnt -30.6078652699788 -12.3916210651398 -0.0499791701634725
	chk -30.6078652699788 -12.3916210651398 -0.0499791701634725
	pnt -30.6314757029215 -12.3923253973325 -0.0499791701634725
	chk -30.6315553029378 -12.392327773571 -0.0499791701634725
	pnt -30.6336062113444 -12.533322985967 -0.0499791701634725
	chk -30.6336062113444 -12.533322985967 -0.0499791701634725
	pnt -30.634156481425 -12.5597954591115 -0.0499791701634725
	chk -30.634156481425 -12.5597954591115 -0.0499791701634725
	pnt -30.6755632400513 -12.5577058156331 -0.0499791701634725
~~ }
NAV: nav17 once ~~ {
	pnt -30.5265863418579 -12.43283812205 2.08333134651184E-05
	pnt -30.4109274546305 -12.4340874751409 2.08333134651184E-05
	chk -30.4109274546305 -12.4340874751409 2.08333134651184E-05
	pnt -30.3937983194987 -12.4350248177846 2.08333134651184E-05
	chk -30.3937983194987 -12.4350248177846 2.08333134651184E-05
	pnt -30.3583934783936 -12.4383195161819 2.08333134651184E-05
	pnt -30.3434710184733 -12.4497459173203 2.08333134651184E-05
	chk -30.3434710184733 -12.4497459173203 2.08333134651184E-05
	pnt -30.343380355835 -12.4550359964371 2.08333134651184E-05
	jmp -30.3432483673096 -12.4964844226837 -0.0499791701634725 180 {True} 200.00003
	pau -30.3432483673096 -12.4964844226837 -0.0499791701634725 5000
	pnt -30.3433587392171 -12.4894550959269 -0.0499791701634725
	chk -30.3433587392171 -12.4894550959269 -0.0499791701634725
	pnt -30.3432483673096 -12.4964844226837 -0.0499791701634725
~~ }
NAV: nav18 once ~~ {
	pnt -30.6762100219727 -12.6005366802216 -0.0499791701634725
	pnt -30.632128461202 -12.6001699288686 -0.0499791701634725
	chk -30.632128461202 -12.6001699288686 -0.0499791701634725
	pnt -30.6336154301961 -12.6149067560832 -0.0499791701634725
	chk -30.6336154301961 -12.6149067560832 -0.0499791701634725
	pnt -30.6330916086833 -12.6568345069885 -0.0499791701634725
	chk -30.6330916086833 -12.6568345069885 -0.0499791701634725
	pnt -30.6331424077352 -12.6716459592183 -0.0499791701634725
	chk -30.6331424077352 -12.6716459592183 -0.0499791701634725
	pnt -30.6504887898763 -12.6883775075277 -0.0499791701634725
	pnt -30.6852142969767 -12.7111997922262 -0.0499791701634725
	pnt -30.7032255172729 -12.7313250541687 -0.0499791701634725
	pnt -30.7177419026693 -12.7667498270671 -0.0499791701634725
~~ }
NAV: nav19 once ~~ {
	pnt -36.548805363973 -81.6173274993896 0.283354187011719
	pnt -36.5466259002686 -81.5864334106445 0.283354187011719
	pnt -36.5574736277262 -81.5579658508301 0.283354187011719
	pnt -36.5796178181966 -81.5398052215576 0.283354187011719
	pnt -36.6129543304443 -81.5224814732869 0.283354187011719
	pnt -36.6750818888346 -81.4984438578288 0.283354187011719
	pnt -36.8864765485128 -81.4685727437337 0.283354187011719
	pnt -37.0383652687073 -81.4875252405802 0.283354187011719
	pnt -37.2035799662272 -81.5219220479329 0.283354187011719
	pnt -37.261564318339 -81.5231043497721 0.271789868672689
	pnt -37.3069797515869 -81.5230518976847 0.236384963989258
	pnt -37.3682397206624 -81.5187316894531 0.20018482208252
	pnt -37.4157325744629 -81.5098960240682 0.17073008219401
	pnt -37.4719309488932 -81.4751913070679 0.147921562194824
	pnt -37.5074321746826 -81.461595026652 0.149054590861003
	pnt -37.5726518630981 -81.459784634908 0.156499195098877
	pnt -37.67746925354 -81.465897432963 0.184537728627523
	pnt -37.7943832715352 -81.4641819000244 0.2062362353007
	pnt -37.9036403338114 -81.4558792750041 0.233097807566325
	pnt -38.0086101531982 -81.4478158315023 0.270285606384277
	pnt -38.125412050883 -81.5063142140706 0.283354187011719
	pnt -38.2337378819784 -81.5549428939819 0.283354187011719
	pnt -38.3220153172811 -81.5822218577067 0.283354187011719
	pnt -38.4136852264404 -81.5692739486694 0.283354187011719
	pnt -38.5188105583191 -81.5517693201701 0.283354187011719
	pnt -38.5608657201131 -81.5227515538534 0.283354187011719
	pnt -38.5846608161926 -81.4495985031128 0.283354187011719
	pnt -38.6296417395274 -81.1974730173747 0.283354187011719
	pnt -38.6335498015086 -81.0805958350499 0.283354187011719
	pnt -38.6234801848729 -80.8312046686808 0.283354187011719
	pnt -38.7148279746374 -80.6932223002116 0.283354187011719
	pnt -38.7333683083455 -80.5910222371419 0.283354187011719
	pnt -38.7216074466705 -80.3933048248291 0.283354187011719
	pnt -38.7209641695023 -80.3501984914144 0.283354187011719
	pnt -38.7318661769231 -80.3235639731089 0.283354187011719
	pnt -38.7752923329671 -80.2158542474111 0.283354187011719
	pnt -38.8295819600423 -80.0629031499227 0.283354187011719
	pnt -38.8769929250081 -79.8864135742188 0.283354187011719
	pnt -38.9475721995036 -79.6742616017659 0.283354187011719
	pnt -39.0606070518494 -79.4847847938538 0.191571617126465
	pnt -39.0660593986511 -79.4267914692561 0.19987408320109
	pnt -39.0805285453796 -79.3744654973348 0.204977782567342
	pnt -39.128465461731 -79.3111277739207 0.196721394856771
	pnt -39.1282760620117 -79.2645959854126 0.200614833831787
	pnt -39.1360193888346 -79.1102679570516 0.160138003031413
	pnt -39.1460746765137 -79.0767950057983 0.163203001022339
	pnt -39.170011583964 -79.0462107340495 0.162316147486369
	pnt -39.1948350270589 -79.0209728240967 0.160316610336304
	pnt -39.1951123555501 -78.9821295420329 0.162928136189779
	ptl -39.1998043696086 -78.9929028193156 0.162537145614624 -39.2054512341817 -78.9659708023071 0.16178323328495 14 {Curator of Torment's Study}
	pau -39.1998043696086 -78.9929028193156 0.162537145614624 5000
~~ }
NAV: nav20 once ~~ {
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
	pau 96.5192172686259 -77.3924765904744 -0.406645806630452 9000
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
	pnt -30.6363002141317 -12.7793725649516 2.08333134651184E-05
~~ }
NAV: nav21 once ~~ {
	pnt 95.4566380818685 2.26212631861369 0.24168750445048
	pnt 95.4576773325602 2.29519685109456 0.24168750445048
	ptl 95.4488681793213 2.26419467926025 0.24168750445048 95.4555708567301 2.31398749351501 0.242491692304611 14 {Portal to Town Network}
~~ }
NAV: nav22 once ~~ {
	pnt -67.0876766204834 -87.5032318592071 0.200020837783813
	pnt -67.0469738006592 -87.5611455281576 0.200020837783813
	pnt -67.0277371724447 -87.6015951792399 0.200020837783813
	pnt -67.007299041748 -87.6430988311768 0.200020837783813
	pnt -66.9822244008382 -87.6880376180013 0.200020837783813
	pnt -66.9488975524902 -87.7389623006185 0.200020837783813
	pnt -66.9144329071045 -87.7814928690593 0.200020837783813
	pnt -66.882655843099 -87.8220549265544 0.200020837783813
	pnt -66.8449871063232 -87.8571822484334 0.200020837783813
	pau -66.7991790135702 -88.5017809549967 0.24168750445048 3000
	cht -66.7991790135702 -88.5017809549967 0.24168750445048 {/ub uselp Portcullis}
	pnt -66.7705346425374 -87.9204802831014 0.200020837783813
	pnt -66.7351977864901 -87.9446491241455 0.200020837783813
	pnt -66.7020751555761 -87.9656484603882 0.200020837783813
	pnt -66.672921705246 -87.9888519287109 0.200020837783813
	pnt -66.6473769346873 -88.0137584686279 0.200020837783813
	pnt -66.6300219376882 -88.0420530954997 0.200020837783813
	pnt -66.6226280848185 -88.0680220286051 0.200020837783813
	pnt -66.622947994868 -88.1053787549337 0.200020837783813
	pnt -66.6355709075928 -88.1376776059469 0.200020837783813
	pnt -66.6643270333608 -88.1738467534383 0.197232389450073
	pnt -66.7010769844055 -88.2059659322103 0.188245916366577
	pnt -66.7189193844795 -88.2368653933207 0.188935216267904
	pnt -66.7325121144454 -88.2709805647532 0.19297129313151
	pnt -66.7438880910476 -88.3084565957387 0.199496301015218
	pnt -66.7530954996745 -88.3391114880641 0.205632034937541
	pnt -66.7637543996175 -88.3800285975138 0.215861320495605
	pnt -66.7671703338623 -88.4132177352905 0.224158604939779
	pnt -66.7686236063639 -88.4464667638143 0.232470862070719
	pnt -66.7685234069824 -88.4800610224406 0.233354171117147
	pnt -66.7694878896077 -88.5121271769206 0.233354171117147
	pnt -66.7785892486572 -88.5395446777344 0.233354171117147
	pnt -66.7869696935018 -88.5623240152995 0.233354171117147
	pnt -66.7915064493815 -88.5442377726237 0.233354171117147
	pnt -66.7938504536947 -88.5306166330973 0.233354171117147
	pnt -66.7940879821777 -88.5277765274048 0.23558095296224
	pnt -66.798708152771 -88.5225212097168 0.239871009190877
	pnt -66.8003653208415 -88.5179709752401 0.24358549118042
	pnt -66.8006680170695 -88.5089884440104 0.24168750445048
	pnt -66.7991790135702 -88.5017809549967 0.24168750445048
	ptl -66.7991790135702 -88.5017809549967 0.24168750445048 -66.8 -88.4791666666667 0.241404160857201 14 {South Direlands Portal}
	pau -66.7991790135702 -88.5017809549967 0.24168750445048 5000
~~ }
NAV: nav23 once ~~ {
	pnt -34.4375 -84.2041666666667 0.164256954193115
	pnt -34.4375384012858 -84.1923448403676 0.165235710144043
	pnt -34.4822787602742 -84.1379286448161 0.15793981552124
	pnt -34.5625564257304 -83.9850297292074 0.167733875910441
	pnt -34.5890373706818 -83.9268682479858 0.173795906702677
	pnt -34.6055995464325 -83.8967590332031 0.18019429842631
	pnt -34.6535204648972 -83.8622179349263 0.189064439137777
	pnt -34.6612361431122 -83.8501473108927 0.189790264765422
	pnt -34.6754628022512 -83.8257652918498 0.191482830047607
	pnt -34.6888992468516 -83.8021069844564 0.190188535054525
	pnt -34.7057040452957 -83.7609334309896 0.18612707455953
	pnt -34.7251266717911 -83.7110551198324 0.171314907073975
	pnt -34.7436817367872 -83.6740529378255 0.158989842732747
	pnt -34.7740842183431 -83.6267077128093 0.148211797078451
	pnt -34.7949953715007 -83.5925187428792 0.148352209726969
	pnt -34.8072658538818 -83.564176940918 0.150008217493693
	pnt -34.8280544281006 -83.5344774961472 0.152348073323568
	pnt -34.8480492909749 -83.506235575676 0.156763331095378
	pnt -34.8571448008219 -83.4843438704809 0.167145299911499
	pnt -34.8754620869954 -83.4606288194656 0.18173672358195
	pnt -34.895027923584 -83.4401000420253 0.193330144882202
	pnt -34.9167607625326 -83.4209944327672 0.206942955652873
	pnt -34.9348988850911 -83.398152256012 0.220603052775065
	pnt -34.953918838501 -83.371239344279 0.236240593592326
	pnt -34.9712224324544 -83.3490483760834 0.250530195236206
	pnt -34.9910078684489 -83.3222290674845 0.258774121602376
	pnt -35.0092721303304 -83.2974718093872 0.266384236017863
	pnt -35.0301299413045 -83.2691002527873 0.275010808308919
	pnt -35.0481455802917 -83.2435800552368 0.282426961263021
	pnt -35.0677003224691 -83.1900264104207 0.283354187011719
	pnt -35.0748655319214 -83.147333017985 0.283354187011719
	pnt -35.0730164845785 -83.1091564178467 0.283354187011719
	pnt -35.070148785909 -83.0744737625122 0.283354187011719
	pnt -35.0675853093465 -83.0434682846069 0.283354187011719
	pnt -35.0682901382446 -83.0118385950724 0.283354187011719
	pnt -35.0696545283 -82.9792886098226 0.283354187011719
	pnt -35.0709576288859 -82.9482046763102 0.283354187011719
	pnt -35.0742496490479 -82.9168500264486 0.283354187011719
	pnt -35.0831511815389 -82.8841519673665 0.283354187011719
	pnt -35.0911651611328 -82.8547143300374 0.283354187011719
	pnt -35.0993371327718 -82.8246964772542 0.283354187011719
	pnt -35.1073614756266 -82.7952208201091 0.283354187011719
	pnt -35.1142200469971 -82.7700272878011 0.283354187011719
	pnt -35.1212522506714 -82.7441957558195 0.283354187011719
	pnt -35.1276730855306 -82.7206097483635 0.283354187011719
	pnt -35.1338567733765 -82.6978949069977 0.283354187011719
	pnt -35.1400906880697 -82.6749954859416 0.283354187011719
	pnt -35.1464630126953 -82.6515879631042 0.283354187011719
	pnt -35.1523566563924 -82.6299386342367 0.283354187011719
	pnt -35.1587774276733 -82.6063526471456 0.283354187011719
	pnt -35.1649381637573 -82.5837222735087 0.283354187011719
	pnt -35.1706293741862 -82.5628165562948 0.283354187011719
	pnt -35.1774630864461 -82.5377140363057 0.283354187011719
	pnt -35.1835920333862 -82.5152002016703 0.283354187011719
	pnt -35.1898672739665 -82.4921492894491 0.283354187011719
	pnt -35.1957043965658 -82.4707075119019 0.283354187011719
	pnt -35.2020382563273 -82.4474412282308 0.283354187011719
	pnt -35.207980855306 -82.4256121317546 0.283354187011719
	pnt -35.2146563212077 -82.4010908126831 0.283354187011719
	pnt -35.2208552042643 -82.378319867452 0.283354187011719
	pnt -35.2278172175089 -82.3527461369832 0.283354187011719
	pnt -35.2338704109192 -82.3305104255676 0.283354187011719
	pnt -35.2401453018188 -82.307460530599 0.283354187011719
	pnt -35.2492055892944 -82.2832272211711 0.283354187011719
	pnt -35.260793876648 -82.2649201075236 0.283354187011719
	pnt -35.2772242863973 -82.2478955586751 0.283354187011719
	pnt -35.2940300305684 -82.2342206954956 0.283354187011719
	pnt -35.3147236824036 -82.221270052592 0.283354187011719
	pnt -35.3333761533101 -82.210245958964 0.283354187011719
	pnt -35.3553353627523 -82.1972679138184 0.283354187011719
	pnt -35.3759009679159 -82.1851132710775 0.283354187011719
	pnt -35.3950801849365 -82.1752433776855 0.283354187011719
	pnt -35.4176427920659 -82.1673946380615 0.283354187011719
	pnt -35.4404558181763 -82.1594590504964 0.283354187011719
	pnt -35.4657869497935 -82.150647354126 0.283354187011719
	pnt -35.4862508455912 -82.1435287475586 0.283354187011719
	pnt -35.509338315328 -82.1354975382487 0.283354187011719
	pnt -35.5329930583636 -82.1272691090902 0.283354187011719
	pnt -35.5571299235026 -82.118872833252 0.283354187011719
	pnt -35.5796924591064 -82.1110240936279 0.283354187011719
	pnt -35.6038604736328 -82.1026170094808 0.283354187011719
	pnt -35.6269476572673 -82.0945858001709 0.283354187011719
	pnt -35.6512170155843 -82.0861434936523 0.283354187011719
	pnt -35.6741452534993 -82.0781677246094 0.283354187011719
	pnt -35.6991505940755 -82.0694694519043 0.283354187011719
	pnt -35.7213874816895 -82.0617341359456 0.283354187011719
	pnt -35.743888982137 -82.0539067586263 0.283354187011719
	pnt -35.7863915761312 -82.0391216278076 0.283354187011719
	pnt -35.8123251597087 -82.0334164937337 0.283354187011719
	pnt -35.8408790588379 -82.0294999440511 0.283354187011719
	pnt -35.8728045145671 -82.0251394907634 0.283354187011719
	pnt -35.9001715342204 -82.0214019775391 0.283354187011719
	pnt -35.93045241038 -82.0172662099203 0.283354187011719
	pnt -35.9606915156047 -82.0131362915039 0.283354187011719
	pnt -35.988213411967 -82.0093775431315 0.283354187011719
	pnt -36.0273764292399 -82.0022062937419 0.283354187011719
	pnt -36.0559686660767 -81.9953097025553 0.283354187011719
	pnt -36.0856721242269 -81.9881450653076 0.283354187011719
	pnt -36.1104430198669 -81.9821701049805 0.283354187011719
	pnt -36.1468570709228 -81.9733871459961 0.283354187011719
	pnt -36.1752476056417 -81.9661357879639 0.283354187011719
	pnt -36.2035538355509 -81.9561983744303 0.283354187011719
	pnt -36.2291239738464 -81.9455748677254 0.283354187011719
	pnt -36.254075050354 -81.9299411674341 0.283354187011719
	pnt -36.2798964977264 -81.9169997135798 0.283354187011719
	pnt -36.3031006971995 -81.9029891252518 0.283354187011719
	pnt -36.3241559783618 -81.8866250038147 0.283354187011719
	pnt -36.3463092366854 -81.8694075743357 0.283354187011719
	pnt -36.3638685862223 -81.8461805184682 0.283354187011719
	pnt -36.375848642985 -81.8223563989004 0.283354187011719
	pnt -36.3876041412354 -81.7989791552226 0.283354187011719
	pnt -36.3982405344645 -81.7778273264567 0.283354187011719
	pnt -36.4117822011312 -81.7549900054932 0.283354187011719
	pnt -36.4266835530599 -81.7370388348897 0.283354187011719
	pnt -36.4479721069336 -81.7159017244975 0.283354187011719
	pnt -36.4685817718506 -81.6989891688029 0.283354187011719
	pnt -36.4956732432048 -81.6866870562235 0.283354187011719
	pnt -36.5144012451172 -81.672679456075 0.283354187011719
	pnt -36.5267583211263 -81.6513743082682 0.283354187011719
	pnt -36.5327940622966 -81.6271138509115 0.283354187011719
	pnt -36.5404888153076 -81.6051912943522 0.283354187011719
	pnt -36.5507879892985 -81.5836364746094 0.283354187011719
	pnt -36.5605112711589 -81.5806280771891 0.283354187011719
	pnt -36.568178876241 -81.5866710027059 0.283354187011719
	pnt -36.5753648122152 -81.589328289032 0.283354187011719
	pnt -36.5823564529419 -81.5908736864726 0.283354187011719
	chk -36.5823564529419 -81.5908736864726 0.283354187011719
	pnt -36.5823564529419 -81.5908736864726 0.283354187011719
	pnt -36.589127667745 -81.593760172526 0.283871523539225
	chk -36.589127667745 -81.593760172526 0.283871523539225
	pnt -36.5967194875081 -81.5970293045044 0.2826278368632
	chk -36.5967194875081 -81.5970293045044 0.2826278368632
	pnt -36.612099647522 -81.604086526235 0.269300715128581
	chk -36.612099647522 -81.604086526235 0.269300715128581
	pnt -36.6136466344198 -81.6049843152364 0.267897701263428
	pnt -36.6418380419413 -81.6171898206075 0.261687501271566
	ptl -36.6427490234375 -81.6169308026632 0.261687501271566 -36.6614000002543 -81.6286124865214 0.261404186487198 14 {Tumerok Chamber}
~~ }
NAV: nav24 once ~~ {
	pnt -100.928375005722 48.3111249923706 2.08333134651184E-05
	ptl -100.928375005722 48.3111249923706 2.08333134651184E-05 -100.90586291949 48.3169358332952 -0.000262499845121056 14 {Surface}
	pau -100.928375005722 48.3111249923706 2.08333134651184E-05 5000
~~ }
NAV: nav25 once ~~ {
	pnt -36.559583346049 -81.6416666666667 0.283354187011719
	pnt -36.559583346049 -81.6416666666667 0.283354187011719
	pnt -36.559583346049 -81.6416666666667 0.283354187011719
	pnt -36.559583346049 -81.6416666666667 0.283354187011719
	pau -36.559583346049 -81.6416666666667 0.283354187011719 9000
	pnt -36.559583346049 -81.6416666666667 0.283354187011719
	pnt -36.559583346049 -81.6416666666667 0.283354187011719
	pnt -36.559583346049 -81.6416666666667 0.283354187011719
~~ }
